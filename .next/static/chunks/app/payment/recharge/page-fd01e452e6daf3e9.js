(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{102:function(e,s,t){Promise.resolve().then(t.bind(t,6819))},6819:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var r=t(7437),a=t(4620),i=t(4033),n=t(2265),l=t(9598),c=t(3611),d=t(708),x=t(446),m=t(1738),o=t(4116),u=t(1298),h=t(9168),f=t(5340),g=t(6643),p=t(2442),j=t(2369);let N=[{id:"starter",name:"入门包",credits:50,price:9.99,features:["50 积分","基础匹配","标准客服"]},{id:"popular",name:"热门包",credits:150,price:24.99,originalPrice:29.99,popular:!0,features:["150 积分","优先匹配","优先客服","高级筛选"]},{id:"premium",name:"高级包",credits:300,price:44.99,originalPrice:59.99,bestValue:!0,features:["300 积分","超级匹配","专属客服","无限筛选","数据分析"]},{id:"ultimate",name:"终极包",credits:500,price:69.99,originalPrice:99.99,features:["500 积分","VIP 匹配","24/7 客服","所有功能","专属活动"]}],b=[{id:"stripe",name:"信用卡/借记卡",icon:m.Z,description:"Visa, Mastercard, American Express",processingTime:"即时到账"},{id:"usdt",name:"USDT 支付",icon:o.Z,description:"TRC20 网络",processingTime:"1-3 分钟"},{id:"alipay",name:"支付宝",icon:u.Z,description:"支付宝扫码支付",processingTime:"即时到账"}];function y(){let{toast:e}=(0,x.p)(),[s,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(null),[m,o]=(0,n.useState)(!1),u=e=>{t(e)},y=e=>{i(e)},w=async()=>{if(!s||!a){e({title:"请选择套餐和支付方式",description:"请先选择积分套餐和支付方式",variant:"destructive"});return}o(!0);try{let t=await fetch("/api/payments/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:s.id,paymentMethod:a.id,amount:s.price,credits:s.credits})});if(t.ok){let s=await t.json();"stripe"===a.id?window.location.href=s.checkoutUrl:"usdt"===a.id?e({title:"USDT 支付",description:"请向地址 ".concat(s.paymentAddress," 转账 ").concat(s.amount," USDT")}):"alipay"===a.id&&e({title:"支付宝支付",description:"请扫描二维码完成支付"})}else throw Error("支付创建失败")}catch(s){e({title:"支付失败",description:"请稍后重试",variant:"destructive"})}finally{o(!1)}},k=e=>e.bestValue?h.Z:e.popular?f.Z:g.Z;return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"积分充值"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"选择适合您的积分套餐，开始您的匹配之旅"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"选择套餐"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(e=>{let t=k(e),a=(null==s?void 0:s.id)===e.id;return(0,r.jsxs)(l.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(a?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900/20":"hover:border-gray-300"),onClick:()=>u(e),children:[(0,r.jsxs)(l.Ol,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(t,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)(l.ll,{className:"text-lg",children:e.name})]}),a&&(0,r.jsx)(p.Z,{className:"h-5 w-5 text-blue-600"})]}),e.popular&&(0,r.jsx)(d.C,{className:"w-fit bg-orange-100 text-orange-800",children:"热门"}),e.bestValue&&(0,r.jsx)(d.C,{className:"w-fit bg-purple-100 text-purple-800",children:"最超值"})]}),(0,r.jsxs)(l.aY,{children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.credits}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"积分"})]}),(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\xa5",e.price]}),e.originalPrice&&(0,r.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["\xa5",e.originalPrice]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"一次性付款"})]}),(0,r.jsx)("ul",{className:"space-y-2",children:e.features.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),e]},s))})]})]},e.id)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"选择支付方式"}),(0,r.jsx)("div",{className:"space-y-4",children:b.map(e=>{let s=e.icon,t=(null==a?void 0:a.id)===e.id;return(0,r.jsx)(l.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(t?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900/20":"hover:border-gray-300"),onClick:()=>y(e),children:(0,r.jsx)(l.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(s,{className:"h-6 w-6 text-gray-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"处理时间"}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.processingTime})]}),t&&(0,r.jsx)(p.Z,{className:"h-5 w-5 text-blue-600"})]})]})})},e.id)})}),s&&(0,r.jsxs)(l.Zb,{className:"mt-6",children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)(l.ll,{children:"购买摘要"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"套餐"}),(0,r.jsx)("span",{className:"font-medium",children:s.name})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"积分"}),(0,r.jsxs)("span",{className:"font-medium",children:[s.credits," 积分"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"支付方式"}),(0,r.jsx)("span",{className:"font-medium",children:(null==a?void 0:a.name)||"未选择"})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-lg font-medium",children:"总计"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["\xa5",s.price]})]})}),(0,r.jsx)(c.z,{onClick:w,disabled:!a||m,className:"w-full",size:"lg",children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"处理中..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"立即购买"]})})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-12",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-8",children:"为什么选择我们的积分系统？"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"text-center p-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(j.Z,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"即时到账"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"支付成功后积分立即到账，无需等待"})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"text-center p-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(v,{className:"h-6 w-6 text-green-600"})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"安全支付"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"多种安全支付方式，保护您的资金安全"})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"text-center p-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(g.Z,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"优惠活动"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"定期推出优惠活动，让您享受更多价值"})]})})]})]})]})}let v=e=>{let{className:s}=e;return(0,r.jsx)("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})};function w(){let{user:e}=(0,a.a)(),s=(0,i.useRouter)();return((0,n.useEffect)(()=>{e||s.push("/auth/login")},[e,s]),e)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsx)(y,{})}):null}},708:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(7437);t(2265);var a=t(6061),i=t(1628);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)(n({variant:t}),s),...a})}},9598:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return n},aY:function(){return x},ll:function(){return c}});var r=t(7437),a=t(2265),i=t(1628);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...a})});x.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});m.displayName="CardFooter"},446:function(e,s,t){"use strict";t.d(s,{p:function(){return a}});var r=t(1271);let a=r.pm}},function(e){e.O(0,[216,689,744],function(){return e(e.s=102)}),_N_E=e.O()}]);