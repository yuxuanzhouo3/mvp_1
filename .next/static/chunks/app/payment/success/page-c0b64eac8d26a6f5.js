(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{2528:function(e,t,s){Promise.resolve().then(s.bind(s,9358))},9358:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(7437),a=s(2265),n=s(4033),i=s(9598),c=s(3611),l=s(446),d=s(3008),o=s(1738),u=s(8291),f=s(7480);function m(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{toast:s}=(0,l.p)(),[m,x]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0),g=t.get("session_id");(0,a.useEffect)(()=>{g?y(g):h(!1)},[g]);let y=async e=>{try{let t=await fetch("/api/payments/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e})});if(t.ok){let e=await t.json();x(e)}else s({title:"支付验证失败",description:"无法验证支付状态，请联系客服",variant:"destructive"})}catch(e){s({title:"验证失败",description:"网络错误，请稍后重试",variant:"destructive"})}finally{h(!1)}};return p?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"正在验证支付..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)(i.Zb,{className:"text-center",children:[(0,r.jsxs)(i.Ol,{className:"pb-4",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),(0,r.jsx)(i.ll,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"支付成功！"}),(0,r.jsx)(i.SZ,{className:"text-gray-600 dark:text-gray-400",children:"您的积分已成功添加到账户"})]}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[m?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsxs)("span",{className:"font-semibold text-green-800 dark:text-green-200",children:["+",m.credits," 积分"]})]}),(0,r.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"已添加到您的账户"})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"支付金额:"}),(0,r.jsxs)("span",{className:"font-medium",children:["\xa5",m.amount]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"支付方式:"}),(0,r.jsx)("span",{className:"font-medium",children:m.paymentMethod})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"交易ID:"}),(0,r.jsxs)("span",{className:"font-mono text-xs",children:[m.transactionId.slice(0,8),"..."]})]})]})]}):(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"支付已完成，积分将在几分钟内到账"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(c.z,{onClick:()=>{e.push("/matching")},className:"w-full",size:"lg",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"开始匹配"]}),(0,r.jsxs)(c.z,{onClick:()=>{e.push("/dashboard")},variant:"outline",className:"w-full",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"返回仪表板"]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("p",{children:"如有问题，请联系客服"}),(0,r.jsx)("p",{children:"客服邮箱: support@personalink.com"})]})]})]})})})}},3611:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),a=s(2265),n=s(7256),i=s(6061),c=s(1628);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,c.cn)(l({variant:a,size:i,className:s})),ref:t,...o})});d.displayName="Button"},9598:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return l}});var r=s(7437),a=s(2265),n=s(1628);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});c.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},1271:function(e,t,s){"use strict";s.d(t,{pm:function(){return f}});var r=s(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function o(e){d=c(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},446:function(e,t,s){"use strict";s.d(t,{p:function(){return a}});var r=s(1271);let a=r.pm},1628:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7042),a=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[216,744],function(){return e(e.s=2528)}),_N_E=e.O()}]);