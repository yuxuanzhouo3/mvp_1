(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{5587:function(e,t,s){Promise.resolve().then(s.bind(s,2537))},2537:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var r=s(7437),a=s(2265),n=s(4033),i=s(1396),l=s.n(i),o=s(1865),c=s(8110),d=s(2160),u=s(3611),m=s(5831),p=s(9598),h=s(4620),f=s(446),x=s(3008),b=s(3067),w=s(2851),g=s(5589),v=s(7216),y=s(9670),N=s(1492);let j=d.Ry({password:d.Z_().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:d.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function I(){let e=window.location.hash.substring(1),t=new URLSearchParams(e),s={};return Array.from(t.entries()).forEach(e=>{let[t,r]=e;s[t]=r}),s}function S(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),[d,S]=(0,a.useState)(!1),[k,T]=(0,a.useState)(!1),[O,C]=(0,a.useState)(!1),[E,_]=(0,a.useState)(!0),A=(0,n.useRouter)(),Z=(0,n.useSearchParams)(),{user:J}=(0,h.a)(),{toast:M}=(0,f.p)(),z=(0,o.cI)({resolver:(0,c.F)(j)});(0,a.useEffect)(()=>{let e=async()=>{try{let e=(0,N.eI)("https://bamratexknmqvdbalzen.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXJhdGV4a25tcXZkYmFsemVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MTM4NzEsImV4cCI6MjA2ODA4OTg3MX0.yYa98ioJLLouUgHWITGb7U_VjNCTUuM-5NcraM7f3zA"),{data:{session:t},error:s}=await e.auth.getSession();if(s){M({title:"Session Error",description:"Please try the password reset process again.",variant:"destructive"}),A.push("/auth/forgot-password");return}if(!t){let t=Z.get("access_token")||I().access_token,s=Z.get("refresh_token")||I().refresh_token;if(t&&s){let{error:r}=await e.auth.setSession({access_token:t,refresh_token:s});if(r){M({title:"Invalid Reset Link",description:"This password reset link is invalid or has expired. Please request a new one.",variant:"destructive"}),A.push("/auth/forgot-password");return}window.location.hash&&window.history.replaceState(null,"",window.location.pathname)}else{M({title:"No Valid Session",description:"Please use the password reset link from your email.",variant:"destructive"}),A.push("/auth/forgot-password");return}}C(!0)}catch(e){M({title:"Error",description:"Unable to verify your session. Please try again.",variant:"destructive"}),A.push("/auth/forgot-password")}finally{_(!1)}};e()},[A,Z,M]);let P=async e=>{t(!0);try{let t=(0,N.eI)("https://bamratexknmqvdbalzen.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXJhdGV4a25tcXZkYmFsemVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MTM4NzEsImV4cCI6MjA2ODA4OTg3MX0.yYa98ioJLLouUgHWITGb7U_VjNCTUuM-5NcraM7f3zA"),{error:s}=await t.auth.updateUser({password:e.password});s?M({title:"Update failed",description:s.message||"Failed to update password. Please try again.",variant:"destructive"}):(i(!0),M({title:"Password updated",description:"Your password has been successfully updated. You can now sign in with your new password."}),await t.auth.signOut())}catch(e){M({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}};return E?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:(0,r.jsx)("div",{className:"relative z-10 w-full max-w-md mx-4",children:(0,r.jsx)(p.Zb,{className:"backdrop-blur-xl bg-white/10 border-white/20 shadow-2xl",children:(0,r.jsx)(p.aY,{className:"text-center py-12",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{className:"text-white text-lg",children:"Verifying your session..."})]})})})})}):O?s?(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),(0,r.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),(0,r.jsx)("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),(0,r.jsx)("div",{className:"relative z-10 w-full max-w-md mx-4",children:(0,r.jsxs)(p.Zb,{className:"backdrop-blur-xl bg-white/10 border-white/20 shadow-2xl",children:[(0,r.jsxs)(p.Ol,{className:"text-center space-y-4 pb-8",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-green-500 to-emerald-500 shadow-glow",children:(0,r.jsx)(x.Z,{className:"h-8 w-8 text-white"})}),(0,r.jsx)(p.ll,{className:"text-3xl font-bold text-white mb-2",children:"Password Updated"}),(0,r.jsx)(p.SZ,{className:"text-gray-300 text-lg",children:"Your password has been successfully updated. You can now sign in with your new password."})]}),(0,r.jsx)(p.aY,{className:"text-center space-y-6",children:(0,r.jsx)(l(),{href:"/auth/login",children:(0,r.jsxs)(u.z,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10 transition-all duration-300",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Sign in"]})})})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),(0,r.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),(0,r.jsx)("div",{className:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),(0,r.jsx)("div",{className:"relative z-10 w-full max-w-md mx-4",children:(0,r.jsxs)(p.Zb,{className:"backdrop-blur-xl bg-white/10 border-white/20 shadow-2xl",children:[(0,r.jsxs)(p.Ol,{className:"text-center space-y-4 pb-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-center space-x-3 mb-6",children:(0,r.jsxs)(l(),{href:"/",className:"flex items-center space-x-3 hover:scale-105 transition-transform duration-200",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl shadow-lg",children:(0,r.jsx)(w.Z,{className:"h-8 w-8 text-white"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white drop-shadow-lg",children:"PersonaLink"})]})}),(0,r.jsx)(p.ll,{className:"text-3xl font-bold text-white mb-2",children:"Update Password"}),(0,r.jsx)(p.SZ,{className:"text-white text-lg font-medium drop-shadow-sm",children:"Enter your new password below"})]}),(0,r.jsxs)(p.aY,{className:"space-y-6",children:[(0,r.jsxs)("form",{onSubmit:z.handleSubmit(P),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(g.Z,{className:"h-5 w-5 text-gray-400 group-focus-within:text-purple-500 transition-colors"})}),(0,r.jsx)(m.I,{...z.register("password"),type:d?"text":"password",placeholder:"New password",className:"pl-10 pr-10 bg-white/5 border-white/20 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-purple-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>S(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d?(0,r.jsx)(v.Z,{className:"h-5 w-5 text-gray-400 hover:text-white transition-colors"}):(0,r.jsx)(y.Z,{className:"h-5 w-5 text-gray-400 hover:text-white transition-colors"})})]}),z.formState.errors.password&&(0,r.jsx)("p",{className:"text-red-400 text-sm",children:z.formState.errors.password.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(g.Z,{className:"h-5 w-5 text-gray-400 group-focus-within:text-purple-500 transition-colors"})}),(0,r.jsx)(m.I,{...z.register("confirmPassword"),type:k?"text":"password",placeholder:"Confirm new password",className:"pl-10 pr-10 bg-white/5 border-white/20 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-purple-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>T(!k),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:k?(0,r.jsx)(v.Z,{className:"h-5 w-5 text-gray-400 hover:text-white transition-colors"}):(0,r.jsx)(y.Z,{className:"h-5 w-5 text-gray-400 hover:text-white transition-colors"})})]}),z.formState.errors.confirmPassword&&(0,r.jsx)("p",{className:"text-red-400 text-sm",children:z.formState.errors.confirmPassword.message})]}),(0,r.jsx)(u.z,{type:"submit",disabled:e,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg",children:e?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Updating..."})]}):"Update password"})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(l(),{href:"/auth/login",className:"text-purple-300 hover:text-white transition-colors text-sm",children:"Remember your password? Sign in"})})]})]})})]}):null}function k(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}),children:(0,r.jsx)(S,{})})}},4620:function(e,t,s){"use strict";s.d(t,{H:function(){return o},a:function(){return c}});var r=s(7437),a=s(2265),n=s(1492);let i=null,l=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),p=(0,a.useRef)(!1),h=(0,a.useRef)(null),f=function(){if(!i){let e="https://bamratexknmqvdbalzen.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXJhdGV4a25tcXZkYmFsemVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MTM4NzEsImV4cCI6MjA2ODA4OTg3MX0.yYa98ioJLLouUgHWITGb7U_VjNCTUuM-5NcraM7f3zA";if(!e||!t)throw Error("Missing Supabase environment variables");i=(0,n.eI)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage}})}return i}();(0,a.useEffect)(()=>{if(p.current)return;p.current=!0;let e=async()=>{try{let{data:{session:e},error:t}=await f.auth.getSession();t||e&&(d(e),o(e.user),h.current=e.user)}catch(e){}finally{m(!1)}};e();let{data:{subscription:t}}=f.auth.onAuthStateChange(async(e,t)=>{m(!0);try{"SIGNED_IN"===e&&t?(d(t),o(t.user),h.current=t.user):"SIGNED_OUT"===e?(d(null),o(null),h.current=null):"TOKEN_REFRESHED"===e&&t?(d(t),o(t.user)):"INITIAL_SESSION"===e&&(t?(d(t),o(t.user),h.current=t.user):(d(null),o(null),h.current=null))}catch(e){}finally{m(!1)}});return()=>{t.unsubscribe()}},[]);let x=(0,a.useCallback)(async(e,t)=>{let{error:s}=await f.auth.signInWithPassword({email:e,password:t});return{error:s}},[]),b=(0,a.useCallback)(async()=>{let{error:e}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return{error:e}},[]),w=(0,a.useCallback)(async e=>{let{error:t}=await f.auth.signInWithOtp({phone:e});return{error:t}},[]),g=(0,a.useCallback)(async(e,t)=>{let{error:s}=await f.auth.verifyOtp({phone:e,token:t,type:"sms"});return{error:s}},[]),v=(0,a.useCallback)(async(e,t)=>{let{error:s}=await f.auth.signUp({email:e,password:t});return{error:s}},[]),y=(0,a.useCallback)(async()=>{try{let{error:e}=await f.auth.signOut();if(e)throw e;d(null),o(null),h.current=null,localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("supabase.auth.expires_at"),localStorage.removeItem("supabase.auth.refresh_token")}catch(e){throw e}},[]);return(0,r.jsx)(l.Provider,{value:{user:s,session:c,loading:u,signIn:x,signInWithGoogle:b,signInWithPhone:w,verifyPhoneOTP:g,signUp:v,signOut:y},children:t})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3611:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),a=s(2265),n=s(7256),i=s(6061),l=s(1628);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},9598:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var r=s(7437),a=s(2265),n=s(1628);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},5831:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(1628);let i=a.forwardRef((e,t)=>{let{className:s,type:a,label:i,error:l,icon:o,description:c,...d}=e;return(0,r.jsxs)("div",{className:"w-full space-y-1",children:[i&&(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground",children:i}),(0,r.jsxs)("div",{className:"relative",children:[o&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o}),(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",o?"pl-10":"",l?"border-destructive focus-visible:ring-destructive/30":"",s),ref:t,...d})]}),c&&!l&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:c}),l&&(0,r.jsx)("p",{className:"text-xs text-destructive",children:l})]})});i.displayName="Input"},1271:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},446:function(e,t,s){"use strict";s.d(t,{p:function(){return a}});var r=s(1271);let a=r.pm},1628:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7042),a=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[216,744],function(){return e(e.s=5587)}),_N_E=e.O()}]);