(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{683:function(e,s,t){Promise.resolve().then(t.bind(t,6663))},6663:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var r=t(7437),a=t(2265),i=t(4033),n=t(1396),l=t.n(n),c=t(1865),o=t(8110),d=t(2160),m=t(3611),u=t(5831),f=t(9598),h=t(1750),p=t(4620),x=t(446),g=t(1295),b=t(5589),v=t(2741),y=t(2845);let j=d.Ry({email:d.Z_().email("Invalid email address"),password:d.Z_().min(6,"Password must be at least 6 characters")}),N=d.Ry({phone:d.Z_().min(10,"Invalid phone number")}),w=d.Ry({otp:d.Z_().length(6,"OTP must be 6 digits")});function S(){let[e,s]=(0,a.useState)(!1),[t,n]=(0,a.useState)(!1),[d,S]=(0,a.useState)(""),T=(0,i.useRouter)(),{signIn:k,signInWithGoogle:C,signInWithPhone:E,verifyPhoneOTP:Z}=(0,p.a)(),{toast:_}=(0,x.p)(),I=(0,c.cI)({resolver:(0,o.F)(j)}),V=(0,c.cI)({resolver:(0,o.F)(N)}),z=(0,c.cI)({resolver:(0,o.F)(w)}),P=async e=>{s(!0);try{let{error:s}=await k(e.email,e.password);s?_({title:"Login failed",description:s.message,variant:"destructive"}):T.push("/dashboard")}catch(e){_({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{s(!1)}},R=async()=>{s(!0);try{let{error:e}=await C();e&&_({title:"Google sign-in failed",description:e.message,variant:"destructive"})}catch(e){_({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{s(!1)}},L=async e=>{s(!0);try{let{error:s}=await E(e.phone);s?_({title:"SMS failed",description:s.message,variant:"destructive"}):(n(!0),S(e.phone),_({title:"SMS sent",description:"Check your phone for the verification code"}))}catch(e){_({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{s(!1)}},A=async e=>{s(!0);try{let{error:s}=await Z(d,e.otp);s?_({title:"Verification failed",description:s.message,variant:"destructive"}):T.push("/dashboard")}catch(e){_({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{s(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,r.jsxs)(f.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(f.Ol,{className:"text-center",children:[(0,r.jsx)(f.ll,{className:"text-2xl font-bold",children:"Welcome back"}),(0,r.jsx)(f.SZ,{children:"Sign in to your PersonaLink account"})]}),(0,r.jsxs)(f.aY,{children:[(0,r.jsxs)(h.Tabs,{defaultValue:"email",className:"w-full",children:[(0,r.jsxs)(h.TabsList,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(h.TabsTrigger,{value:"email",children:"Email"}),(0,r.jsx)(h.TabsTrigger,{value:"phone",children:"Phone"}),(0,r.jsx)(h.TabsTrigger,{value:"google",children:"Google"})]}),(0,r.jsxs)(h.TabsContent,{value:"email",className:"space-y-4",children:[(0,r.jsxs)("form",{onSubmit:I.handleSubmit(P),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.I,{...I.register("email"),type:"email",placeholder:"Email",icon:(0,r.jsx)(g.Z,{className:"h-4 w-4"})}),I.formState.errors.email&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:I.formState.errors.email.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.I,{...I.register("password"),type:"password",placeholder:"Password",icon:(0,r.jsx)(b.Z,{className:"h-4 w-4"})}),I.formState.errors.password&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:I.formState.errors.password.message})]}),(0,r.jsx)(m.z,{type:"submit",className:"w-full",disabled:e,children:e?"Signing in...":"Sign in"})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(l(),{href:"/auth/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})})]}),(0,r.jsx)(h.TabsContent,{value:"phone",className:"space-y-4",children:t?(0,r.jsxs)("form",{onSubmit:z.handleSubmit(A),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.I,{...z.register("otp"),type:"text",placeholder:"Enter 6-digit code",maxLength:6}),z.formState.errors.otp&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:z.formState.errors.otp.message})]}),(0,r.jsx)(m.z,{type:"submit",className:"w-full",disabled:e,children:e?"Verifying...":"Verify code"}),(0,r.jsx)(m.z,{type:"button",variant:"outline",className:"w-full",onClick:()=>n(!1),children:"Back to phone input"})]}):(0,r.jsxs)("form",{onSubmit:V.handleSubmit(L),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.I,{...V.register("phone"),type:"tel",placeholder:"Phone number",icon:(0,r.jsx)(v.Z,{className:"h-4 w-4"})}),V.formState.errors.phone&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:V.formState.errors.phone.message})]}),(0,r.jsx)(m.z,{type:"submit",className:"w-full",disabled:e,children:e?"Sending SMS...":"Send verification code"})]})}),(0,r.jsx)(h.TabsContent,{value:"google",className:"space-y-4",children:(0,r.jsxs)(m.z,{onClick:R,variant:"outline",className:"w-full",disabled:e,children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),e?"Signing in...":"Sign in with Google"]})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(l(),{href:"/auth/register",className:"text-blue-600 hover:underline",children:"Sign up"})]})})]})]})})}},1750:function(e,s,t){"use strict";t.r(s),t.d(s,{Tabs:function(){return l},TabsContent:function(){return d},TabsList:function(){return c},TabsTrigger:function(){return o}});var r=t(7437),a=t(2265),i=t(7094),n=t(1628);let l=i.fC,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});c.displayName=i.aV.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});o.displayName=i.xz.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});d.displayName=i.VY.displayName}},function(e){e.O(0,[216,58,744],function(){return e(e.s=683)}),_N_E=e.O()}]);