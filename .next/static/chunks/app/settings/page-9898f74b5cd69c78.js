(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{5623:function(e,s,t){Promise.resolve().then(t.bind(t,703))},703:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(7437),l=t(2265),r=t(4033),n=t(4620),i=t(9598),c=t(3611),d=t(5831),o=t(453),u=t(446),x=t(7972),m=t(3021),f=t(9036),h=t(1738),j=t(8956);function p(){var e;let s=(0,r.useRouter)(),{user:t,signOut:p}=(0,n.a)(),{toast:N}=(0,u.p)(),[g,b]=(0,l.useState)({notifications:!0,emailUpdates:!0,darkMode:!1,language:"zh-CN"}),[v,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!t){s.push("/auth/login");return}},[t,s]);let w=(e,s)=>{b(t=>({...t,[e]:s}))},k=async()=>{y(!0);try{let e=await fetch("/api/user/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});e.ok&&N({title:"设置已保存",description:"您的设置已成功更新"})}catch(e){N({title:"保存失败",description:"无法保存设置，请稍后重试",variant:"destructive"})}finally{y(!1)}},C=async()=>{await p(),s.push("/")};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"设置"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"管理您的账户设置和偏好"})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 mr-2"}),"个人资料"]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"显示名称"}),(0,a.jsx)(d.I,{defaultValue:(null===(e=t.user_metadata)||void 0===e?void 0:e.full_name)||"",placeholder:"输入显示名称"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"邮箱"}),(0,a.jsx)(d.I,{defaultValue:t.email||"",disabled:!0,className:"bg-gray-50"})]})]}),(0,a.jsx)(c.z,{onClick:()=>s.push("/profile/edit"),children:"编辑完整资料"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"通知设置"]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"推送通知"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"接收新消息和匹配通知"})]}),(0,a.jsx)(o.r,{checked:g.notifications,onCheckedChange:e=>w("notifications",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"邮件更新"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"接收重要更新和活动通知"})]}),(0,a.jsx)(o.r,{checked:g.emailUpdates,onCheckedChange:e=>w("emailUpdates",e)})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"隐私设置"]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"在线状态"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"允许其他用户看到您的在线状态"})]}),(0,a.jsx)(o.r,{defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"位置信息"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"在匹配中显示您的位置"})]}),(0,a.jsx)(o.r,{defaultChecked:!0})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"支付设置"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(c.z,{variant:"outline",onClick:()=>s.push("/payment/recharge"),children:"管理支付方式"})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"语言设置"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("select",{value:g.language,onChange:e=>w("language",e.target.value),className:"w-full p-2 border rounded-md",children:[(0,a.jsx)("option",{value:"zh-CN",children:"中文 (简体)"}),(0,a.jsx)("option",{value:"en-US",children:"English (US)"}),(0,a.jsx)("option",{value:"ja-JP",children:"日本語"})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>s.push("/dashboard"),children:"返回仪表盘"}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)(c.z,{variant:"outline",onClick:k,disabled:v,children:v?"保存中...":"保存设置"}),(0,a.jsx)(c.z,{variant:"destructive",onClick:C,children:"退出登录"})]})]})]})]})}):null}},9598:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},ll:function(){return c}});var a=t(7437),l=t(2265),r=t(1628);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});c.displayName="CardTitle";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});d.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent";let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...l})});u.displayName="CardFooter"},5831:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(7437),l=t(2265),r=t(1628);let n=l.forwardRef((e,s)=>{let{className:t,type:l,label:n,error:i,icon:c,description:d,...o}=e;return(0,a.jsxs)("div",{className:"w-full space-y-1",children:[n&&(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground",children:n}),(0,a.jsxs)("div",{className:"relative",children:[c&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c}),(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",c?"pl-10":"",i?"border-destructive focus-visible:ring-destructive/30":"",t),ref:s,...o})]}),d&&!i&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:d}),i&&(0,a.jsx)("p",{className:"text-xs text-destructive",children:i})]})});n.displayName="Input"},453:function(e,s,t){"use strict";t.d(s,{r:function(){return i}});var a=t(7437),l=t(2265),r=t(2376),n=t(1628);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...l,ref:s,children:(0,a.jsx)(r.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform","data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=r.fC.displayName},446:function(e,s,t){"use strict";t.d(s,{p:function(){return l}});var a=t(1271);let l=a.pm}},function(e){e.O(0,[216,689,744],function(){return e(e.s=5623)}),_N_E=e.O()}]);