(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{7638:function(e,s,a){Promise.resolve().then(a.bind(a,7233))},7233:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var l=a(7437),r=a(2265),n=a(4033),i=a(4620),t=a(446),c=a(9598),d=a(3611),o=a(6743),u=a(6061),m=a(1628);let h=(0,u.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(o.f,{ref:s,className:(0,m.cn)(h(),a),...r})});x.displayName=o.f.displayName;var f=a(453),j=a(7702),g=a(3067),p=a(2295),v=a(7972),N=a(3021),y=a(9036),w=a(597),b=a(8956);function k(){var e,s,a,o,u;let m=(0,n.useRouter)(),{user:h,signOut:k}=(0,i.a)(),{toast:C}=(0,t.p)(),[Z,S]=(0,r.useState)({notifications:{newMatches:!0,messages:!0,weeklyDigest:!1},privacy:{profileVisibility:"public",showOnlineStatus:!0,allowMessages:!0},preferences:{language:"zh-CN",theme:"auto",timezone:"Asia/Shanghai"}}),[R,_]=(0,r.useState)(!1),[O,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=setTimeout(()=>{if(z(!0),!h){m.replace("/auth/login");return}},500);return()=>clearTimeout(e)},[h,m]);let F=async()=>{_(!0);try{await new Promise(e=>setTimeout(e,1e3)),C({title:"设置已保存",description:"您的设置已成功更新"})}catch(e){C({title:"保存失败",description:"无法保存设置，请稍后重试",variant:"destructive"})}finally{_(!1)}},E=async()=>{try{await k(),m.push("/"),C({title:"已退出登录",description:"期待您的再次光临！"})}catch(e){C({title:"退出失败",description:"请稍后重试",variant:"destructive"})}};return O?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:()=>m.back(),className:"flex items-center space-x-2",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"返回"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"设置"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"管理您的账户和偏好设置"})]})]}),(0,l.jsxs)(d.z,{onClick:F,disabled:R,children:[(0,l.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),R?"保存中...":"保存设置"]})]}),(0,l.jsxs)(c.Zb,{className:"mb-8",children:[(0,l.jsxs)(c.Ol,{children:[(0,l.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,l.jsx)(v.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"个人资料"})]}),(0,l.jsx)(c.SZ,{children:"管理您的个人信息和头像"})]}),(0,l.jsx)(c.aY,{children:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(j.qE,{className:"h-16 w-16",children:[(0,l.jsx)(j.F$,{src:null==h?void 0:null===(e=h.user_metadata)||void 0===e?void 0:e.avatar_url}),(0,l.jsx)(j.Q5,{children:(null==h?void 0:null===(a=h.user_metadata)||void 0===a?void 0:null===(s=a.full_name)||void 0===s?void 0:s[0])||(null==h?void 0:null===(o=h.email)||void 0===o?void 0:o[0])||"U"})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:(null==h?void 0:null===(u=h.user_metadata)||void 0===u?void 0:u.full_name)||(null==h?void 0:h.email)}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:null==h?void 0:h.email})]}),(0,l.jsx)(d.z,{variant:"outline",children:"编辑资料"})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)(c.Zb,{children:[(0,l.jsxs)(c.Ol,{children:[(0,l.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,l.jsx)(N.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"通知设置"})]}),(0,l.jsx)(c.SZ,{children:"管理您接收的通知类型"})]}),(0,l.jsxs)(c.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(x,{htmlFor:"new-matches",children:"新匹配通知"}),(0,l.jsx)(f.r,{id:"new-matches",checked:Z.notifications.newMatches,onCheckedChange:e=>S(s=>({...s,notifications:{...s.notifications,newMatches:e}}))})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(x,{htmlFor:"messages",children:"消息通知"}),(0,l.jsx)(f.r,{id:"messages",checked:Z.notifications.messages,onCheckedChange:e=>S(s=>({...s,notifications:{...s.notifications,messages:e}}))})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(x,{htmlFor:"weekly-digest",children:"每周摘要"}),(0,l.jsx)(f.r,{id:"weekly-digest",checked:Z.notifications.weeklyDigest,onCheckedChange:e=>S(s=>({...s,notifications:{...s.notifications,weeklyDigest:e}}))})]})]})]}),(0,l.jsxs)(c.Zb,{children:[(0,l.jsxs)(c.Ol,{children:[(0,l.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,l.jsx)(y.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"隐私设置"})]}),(0,l.jsx)(c.SZ,{children:"控制您的隐私和可见性"})]}),(0,l.jsxs)(c.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(x,{htmlFor:"online-status",children:"显示在线状态"}),(0,l.jsx)(f.r,{id:"online-status",checked:Z.privacy.showOnlineStatus,onCheckedChange:e=>S(s=>({...s,privacy:{...s.privacy,showOnlineStatus:e}}))})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(x,{htmlFor:"allow-messages",children:"允许接收消息"}),(0,l.jsx)(f.r,{id:"allow-messages",checked:Z.privacy.allowMessages,onCheckedChange:e=>S(s=>({...s,privacy:{...s.privacy,allowMessages:e}}))})]})]})]}),(0,l.jsxs)(c.Zb,{children:[(0,l.jsxs)(c.Ol,{children:[(0,l.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,l.jsx)(w.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"偏好设置"})]}),(0,l.jsx)(c.SZ,{children:"自定义您的使用体验"})]}),(0,l.jsxs)(c.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(x,{htmlFor:"language",children:"语言"}),(0,l.jsxs)("select",{id:"language",value:Z.preferences.language,onChange:e=>S(s=>({...s,preferences:{...s.preferences,language:e.target.value}})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700",children:[(0,l.jsx)("option",{value:"zh-CN",children:"中文 (简体)"}),(0,l.jsx)("option",{value:"en-US",children:"English"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x,{htmlFor:"theme",children:"主题"}),(0,l.jsxs)("select",{id:"theme",value:Z.preferences.theme,onChange:e=>S(s=>({...s,preferences:{...s.preferences,theme:e.target.value}})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700",children:[(0,l.jsx)("option",{value:"auto",children:"跟随系统"}),(0,l.jsx)("option",{value:"light",children:"浅色"}),(0,l.jsx)("option",{value:"dark",children:"深色"})]})]})]})]}),(0,l.jsxs)(c.Zb,{children:[(0,l.jsxs)(c.Ol,{children:[(0,l.jsxs)(c.ll,{className:"flex items-center space-x-2",children:[(0,l.jsx)(b.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"账户管理"})]}),(0,l.jsx)(c.SZ,{children:"管理您的账户设置"})]}),(0,l.jsxs)(c.aY,{className:"space-y-4",children:[(0,l.jsx)(d.z,{variant:"outline",className:"w-full",children:"更改密码"}),(0,l.jsx)(d.z,{variant:"outline",className:"w-full",children:"删除账户"}),(0,l.jsx)(d.z,{variant:"destructive",className:"w-full",onClick:E,children:"退出登录"})]})]})]})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48 animate-pulse"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(e=>(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[(0,l.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-4 animate-pulse"}),(0,l.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24 animate-pulse"}),(0,l.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-12 animate-pulse"})]},e))})]},e))})]})})})}},7702:function(e,s,a){"use strict";a.d(s,{F$:function(){return c},Q5:function(){return d},qE:function(){return t}});var l=a(7437),r=a(2265),n=a(1465),i=a(1628);let t=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(n.fC,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});t.displayName=n.fC.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(n.Ee,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",a),...r})});c.displayName=n.Ee.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(n.NY,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});d.displayName=n.NY.displayName},9598:function(e,s,a){"use strict";a.d(s,{Ol:function(){return t},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var l=a(7437),r=a(2265),n=a(1628);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let t=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});t.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},453:function(e,s,a){"use strict";a.d(s,{r:function(){return t}});var l=a(7437),r=a(2265),n=a(2376),i=a(1628);let t=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,l.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform","data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});t.displayName=n.fC.displayName},446:function(e,s,a){"use strict";a.d(s,{p:function(){return r}});var l=a(1271);let r=l.pm}},function(e){e.O(0,[216,689,744],function(){return e(e.s=7638)}),_N_E=e.O()}]);