"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_utils_circuitBreaker_ts";
exports.ids = ["_rsc_lib_utils_circuitBreaker_ts"];
exports.modules = {

/***/ "(rsc)/./lib/utils/circuitBreaker.ts":
/*!*************************************!*\
  !*** ./lib/utils/circuitBreaker.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CircuitBreaker: () => (/* binding */ CircuitBreaker),\n/* harmony export */   CircuitBreakerManager: () => (/* binding */ CircuitBreakerManager),\n/* harmony export */   ServiceUnavailableError: () => (/* binding */ ServiceUnavailableError),\n/* harmony export */   circuitBreakerManager: () => (/* binding */ circuitBreakerManager)\n/* harmony export */ });\nclass CircuitBreaker {\n    constructor(options){\n        this.state = \"closed\";\n        this.failureCount = 0;\n        this.successCount = 0;\n        this.totalRequests = 0;\n        this.halfOpenAttempts = 0;\n        this.consecutiveSuccesses = 0;\n        this.metrics = {\n            totalExecutions: 0,\n            successfulExecutions: 0,\n            failedExecutions: 0,\n            circuitOpens: 0,\n            circuitCloses: 0,\n            averageResponseTime: 0\n        };\n        this.responseTimes = [];\n        this.options = {\n            monitoringWindow: 60000,\n            halfOpenMaxAttempts: 3,\n            ...options\n        };\n    }\n    async execute(fn) {\n        this.totalRequests++;\n        this.metrics.totalExecutions++;\n        // 检查断路器状态\n        if (this.state === \"open\") {\n            if (this.shouldAttemptReset()) {\n                this.transitionToHalfOpen();\n            } else {\n                throw new ServiceUnavailableError(`Circuit breaker is open. Next attempt at ${this.nextAttemptTime?.toISOString()}`);\n            }\n        }\n        try {\n            const startTime = Date.now();\n            const result = await Promise.race([\n                fn(),\n                this.createTimeoutPromise()\n            ]);\n            const responseTime = Date.now() - startTime;\n            this.recordResponseTime(responseTime);\n            // 检查响应时间\n            if (responseTime > this.options.expectedResponseTime) {\n                this.recordFailure(new Error(`Response time ${responseTime}ms exceeded threshold ${this.options.expectedResponseTime}ms`));\n                throw new Error(\"Response time exceeded threshold\");\n            }\n            this.recordSuccess();\n            return result;\n        } catch (error) {\n            this.recordFailure(error);\n            throw error;\n        }\n    }\n    createTimeoutPromise() {\n        return new Promise((_, reject)=>{\n            setTimeout(()=>{\n                reject(new Error(`Operation timeout after ${this.options.expectedResponseTime}ms`));\n            }, this.options.expectedResponseTime);\n        });\n    }\n    recordSuccess() {\n        this.successCount++;\n        this.lastSuccessTime = new Date();\n        this.consecutiveSuccesses++;\n        this.metrics.successfulExecutions++;\n        this.metrics.lastExecutionTime = new Date();\n        if (this.state === \"half-open\") {\n            this.halfOpenAttempts++;\n            // 如果半开状态下连续成功次数达到阈值，关闭断路器\n            if (this.consecutiveSuccesses >= this.options.halfOpenMaxAttempts) {\n                this.transitionToClosed();\n            }\n        } else if (this.state === \"closed\") {\n            // 在关闭状态下，重置失败计数\n            this.failureCount = Math.max(0, this.failureCount - 1);\n        }\n    }\n    recordFailure(error) {\n        this.failureCount++;\n        this.lastFailureTime = new Date();\n        this.consecutiveSuccesses = 0;\n        this.metrics.failedExecutions++;\n        this.metrics.lastExecutionTime = new Date();\n        if (this.state === \"closed\" && this.failureCount >= this.options.failureThreshold) {\n            this.transitionToOpen();\n        } else if (this.state === \"half-open\") {\n            this.transitionToOpen();\n        }\n    }\n    transitionToOpen() {\n        this.state = \"open\";\n        this.nextAttemptTime = new Date(Date.now() + this.options.recoveryTimeout);\n        this.halfOpenAttempts = 0;\n        this.metrics.circuitOpens++;\n        console.warn(`🔴 Circuit breaker opened. Next attempt at ${this.nextAttemptTime.toISOString()}`);\n    }\n    transitionToHalfOpen() {\n        this.state = \"half-open\";\n        this.halfOpenAttempts = 0;\n        this.consecutiveSuccesses = 0;\n        console.log(\"\\uD83D\\uDFE1 Circuit breaker half-open - testing connection\");\n    }\n    transitionToClosed() {\n        this.state = \"closed\";\n        this.failureCount = 0;\n        this.halfOpenAttempts = 0;\n        this.consecutiveSuccesses = 0;\n        this.metrics.circuitCloses++;\n        console.log(\"\\uD83D\\uDFE2 Circuit breaker closed - connection restored\");\n    }\n    shouldAttemptReset() {\n        if (!this.nextAttemptTime) return false;\n        return Date.now() >= this.nextAttemptTime.getTime();\n    }\n    recordResponseTime(responseTime) {\n        this.responseTimes.push(responseTime);\n        // 保持最近100个响应时间\n        if (this.responseTimes.length > 100) {\n            this.responseTimes = this.responseTimes.slice(-100);\n        }\n        // 更新平均响应时间\n        this.metrics.averageResponseTime = this.responseTimes.reduce((sum, time)=>sum + time, 0) / this.responseTimes.length;\n    }\n    getStatus() {\n        const errorRate = this.totalRequests > 0 ? this.failureCount / this.totalRequests : 0;\n        return {\n            state: this.state,\n            failureCount: this.failureCount,\n            successCount: this.successCount,\n            lastFailureTime: this.lastFailureTime,\n            lastSuccessTime: this.lastSuccessTime,\n            nextAttemptTime: this.nextAttemptTime,\n            totalRequests: this.totalRequests,\n            errorRate,\n            halfOpenAttempts: this.halfOpenAttempts,\n            consecutiveSuccesses: this.consecutiveSuccesses\n        };\n    }\n    getMetrics() {\n        return {\n            ...this.metrics\n        };\n    }\n    reset() {\n        this.state = \"closed\";\n        this.failureCount = 0;\n        this.successCount = 0;\n        this.lastFailureTime = undefined;\n        this.lastSuccessTime = undefined;\n        this.nextAttemptTime = undefined;\n        this.totalRequests = 0;\n        this.halfOpenAttempts = 0;\n        this.consecutiveSuccesses = 0;\n        this.responseTimes = [];\n        console.log(\"\\uD83D\\uDD04 Circuit breaker manually reset\");\n    }\n    forceOpen() {\n        this.transitionToOpen();\n    }\n    forceClose() {\n        this.transitionToClosed();\n    }\n    // 获取断路器配置\n    getConfig() {\n        return {\n            ...this.options\n        };\n    }\n    // 更新断路器配置\n    updateConfig(newOptions) {\n        this.options = {\n            ...this.options,\n            ...newOptions\n        };\n        console.log(\"⚙️  Circuit breaker configuration updated\");\n    }\n}\n// 自定义错误类\nclass ServiceUnavailableError extends Error {\n    constructor(message){\n        super(message);\n        this.name = \"ServiceUnavailableError\";\n    }\n}\n// 断路器管理器\nclass CircuitBreakerManager {\n    constructor(defaultOptions){\n        this.breakers = new Map();\n        this.metrics = new Map();\n        this.defaultOptions = defaultOptions;\n    }\n    getBreaker(name, options) {\n        if (!this.breakers.has(name)) {\n            const breakerOptions = {\n                ...this.defaultOptions,\n                ...options\n            };\n            this.breakers.set(name, new CircuitBreaker(breakerOptions));\n        }\n        return this.breakers.get(name);\n    }\n    getStatus() {\n        const status = {};\n        this.breakers.forEach((breaker, name)=>{\n            status[name] = breaker.getStatus();\n        });\n        return status;\n    }\n    getMetrics() {\n        const metrics = {};\n        this.breakers.forEach((breaker, name)=>{\n            metrics[name] = breaker.getMetrics();\n        });\n        return metrics;\n    }\n    resetAll() {\n        this.breakers.forEach((breaker)=>breaker.reset());\n    }\n    forceOpenAll() {\n        this.breakers.forEach((breaker)=>breaker.forceOpen());\n    }\n    forceCloseAll() {\n        this.breakers.forEach((breaker)=>breaker.forceClose());\n    }\n    // 获取所有断路器的聚合状态\n    getAggregateStatus() {\n        const statuses = this.getStatus();\n        const totalBreakers = Object.keys(statuses).length;\n        const openBreakers = Object.values(statuses).filter((s)=>s.state === \"open\").length;\n        const halfOpenBreakers = Object.values(statuses).filter((s)=>s.state === \"half-open\").length;\n        const closedBreakers = Object.values(statuses).filter((s)=>s.state === \"closed\").length;\n        let overallHealth = \"healthy\";\n        if (openBreakers > 0) {\n            overallHealth = openBreakers > totalBreakers * 0.5 ? \"unhealthy\" : \"degraded\";\n        } else if (halfOpenBreakers > 0) {\n            overallHealth = \"degraded\";\n        }\n        return {\n            totalBreakers,\n            openBreakers,\n            halfOpenBreakers,\n            closedBreakers,\n            overallHealth\n        };\n    }\n}\n// 全局断路器管理器实例\nconst circuitBreakerManager = new CircuitBreakerManager({\n    failureThreshold: 5,\n    recoveryTimeout: 60000,\n    expectedResponseTime: 5000,\n    halfOpenMaxAttempts: 3\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDUSxPQUFPLENBQUNDLENBQUFBLFVBQVdBLFFBQVFqQixVQUFVO0lBQ3JEO0lBRUEsZUFBZTtJQUNmcUIscUJBTUU7UUFDQSxNQUFNQyxXQUFXLElBQUksQ0FBQzVCLFNBQVM7UUFDL0IsTUFBTTZCLGdCQUFnQkMsT0FBT0MsSUFBSSxDQUFDSCxVQUFVakMsTUFBTTtRQUNsRCxNQUFNcUMsZUFBZUYsT0FBT0csTUFBTSxDQUFDTCxVQUFVTSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUU5RixLQUFLLEtBQUssUUFBUXNELE1BQU07UUFDbkYsTUFBTXlDLG1CQUFtQk4sT0FBT0csTUFBTSxDQUFDTCxVQUFVTSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUU5RixLQUFLLEtBQUssYUFBYXNELE1BQU07UUFDNUYsTUFBTTBDLGlCQUFpQlAsT0FBT0csTUFBTSxDQUFDTCxVQUFVTSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUU5RixLQUFLLEtBQUssVUFBVXNELE1BQU07UUFFdkYsSUFBSTJDLGdCQUFzRDtRQUUxRCxJQUFJTixlQUFlLEdBQUc7WUFDcEJNLGdCQUFnQk4sZUFBZUgsZ0JBQWdCLE1BQU0sY0FBYztRQUNyRSxPQUFPLElBQUlPLG1CQUFtQixHQUFHO1lBQy9CRSxnQkFBZ0I7UUFDbEI7UUFFQSxPQUFPO1lBQ0xUO1lBQ0FHO1lBQ0FJO1lBQ0FDO1lBQ0FDO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsYUFBYTtBQUNOLE1BQU1DLHdCQUF3QixJQUFJM0Isc0JBQXNCO0lBQzdEekIsa0JBQWtCO0lBQ2xCRSxpQkFBaUI7SUFDakJoQixzQkFBc0I7SUFDdEJqQixxQkFBcUI7QUFDdkIsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3BlcnNvbmFsaW5rLy4vbGliL3V0aWxzL2NpcmN1aXRCcmVha2VyLnRzP2Y1MmYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBDaXJjdWl0QnJlYWtlck9wdGlvbnMge1xuICBmYWlsdXJlVGhyZXNob2xkOiBudW1iZXI7XG4gIHJlY292ZXJ5VGltZW91dDogbnVtYmVyO1xuICBleHBlY3RlZFJlc3BvbnNlVGltZTogbnVtYmVyO1xuICBtb25pdG9yaW5nV2luZG93PzogbnVtYmVyO1xuICBoYWxmT3Blbk1heEF0dGVtcHRzPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcmN1aXRCcmVha2VyU3RhdHVzIHtcbiAgc3RhdGU6ICdjbG9zZWQnIHwgJ29wZW4nIHwgJ2hhbGYtb3Blbic7XG4gIGZhaWx1cmVDb3VudDogbnVtYmVyO1xuICBzdWNjZXNzQ291bnQ6IG51bWJlcjtcbiAgbGFzdEZhaWx1cmVUaW1lPzogRGF0ZTtcbiAgbGFzdFN1Y2Nlc3NUaW1lPzogRGF0ZTtcbiAgbmV4dEF0dGVtcHRUaW1lPzogRGF0ZTtcbiAgdG90YWxSZXF1ZXN0czogbnVtYmVyO1xuICBlcnJvclJhdGU6IG51bWJlcjtcbiAgaGFsZk9wZW5BdHRlbXB0czogbnVtYmVyO1xuICBjb25zZWN1dGl2ZVN1Y2Nlc3NlczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcmN1aXRCcmVha2VyTWV0cmljcyB7XG4gIHRvdGFsRXhlY3V0aW9uczogbnVtYmVyO1xuICBzdWNjZXNzZnVsRXhlY3V0aW9uczogbnVtYmVyO1xuICBmYWlsZWRFeGVjdXRpb25zOiBudW1iZXI7XG4gIGNpcmN1aXRPcGVuczogbnVtYmVyO1xuICBjaXJjdWl0Q2xvc2VzOiBudW1iZXI7XG4gIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IG51bWJlcjtcbiAgbGFzdEV4ZWN1dGlvblRpbWU/OiBEYXRlO1xufVxuXG5leHBvcnQgY2xhc3MgQ2lyY3VpdEJyZWFrZXIge1xuICBwcml2YXRlIHN0YXRlOiAnY2xvc2VkJyB8ICdvcGVuJyB8ICdoYWxmLW9wZW4nID0gJ2Nsb3NlZCc7XG4gIHByaXZhdGUgZmFpbHVyZUNvdW50ID0gMDtcbiAgcHJpdmF0ZSBzdWNjZXNzQ291bnQgPSAwO1xuICBwcml2YXRlIGxhc3RGYWlsdXJlVGltZT86IERhdGU7XG4gIHByaXZhdGUgbGFzdFN1Y2Nlc3NUaW1lPzogRGF0ZTtcbiAgcHJpdmF0ZSBuZXh0QXR0ZW1wdFRpbWU/OiBEYXRlO1xuICBwcml2YXRlIHRvdGFsUmVxdWVzdHMgPSAwO1xuICBwcml2YXRlIGhhbGZPcGVuQXR0ZW1wdHMgPSAwO1xuICBwcml2YXRlIGNvbnNlY3V0aXZlU3VjY2Vzc2VzID0gMDtcbiAgcHJpdmF0ZSBvcHRpb25zOiBDaXJjdWl0QnJlYWtlck9wdGlvbnM7XG4gIHByaXZhdGUgbWV0cmljczogQ2lyY3VpdEJyZWFrZXJNZXRyaWNzID0ge1xuICAgIHRvdGFsRXhlY3V0aW9uczogMCxcbiAgICBzdWNjZXNzZnVsRXhlY3V0aW9uczogMCxcbiAgICBmYWlsZWRFeGVjdXRpb25zOiAwLFxuICAgIGNpcmN1aXRPcGVuczogMCxcbiAgICBjaXJjdWl0Q2xvc2VzOiAwLFxuICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IDBcbiAgfTtcbiAgcHJpdmF0ZSByZXNwb25zZVRpbWVzOiBudW1iZXJbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENpcmN1aXRCcmVha2VyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIG1vbml0b3JpbmdXaW5kb3c6IDYwMDAwLCAvLyAxIG1pbnV0ZSBkZWZhdWx0XG4gICAgICBoYWxmT3Blbk1heEF0dGVtcHRzOiAzLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gIH1cblxuICBhc3luYyBleGVjdXRlPFQ+KGZuOiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgdGhpcy50b3RhbFJlcXVlc3RzKys7XG4gICAgdGhpcy5tZXRyaWNzLnRvdGFsRXhlY3V0aW9ucysrO1xuXG4gICAgLy8g5qOA5p+l5pat6Lev5Zmo54q25oCBXG4gICAgaWYgKHRoaXMuc3RhdGUgPT09ICdvcGVuJykge1xuICAgICAgaWYgKHRoaXMuc2hvdWxkQXR0ZW1wdFJlc2V0KCkpIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uVG9IYWxmT3BlbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFNlcnZpY2VVbmF2YWlsYWJsZUVycm9yKFxuICAgICAgICAgIGBDaXJjdWl0IGJyZWFrZXIgaXMgb3Blbi4gTmV4dCBhdHRlbXB0IGF0ICR7dGhpcy5uZXh0QXR0ZW1wdFRpbWU/LnRvSVNPU3RyaW5nKCl9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgZm4oKSxcbiAgICAgICAgdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZSgpXG4gICAgICBdKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIHRoaXMucmVjb3JkUmVzcG9uc2VUaW1lKHJlc3BvbnNlVGltZSk7XG4gICAgICBcbiAgICAgIC8vIOajgOafpeWTjeW6lOaXtumXtFxuICAgICAgaWYgKHJlc3BvbnNlVGltZSA+IHRoaXMub3B0aW9ucy5leHBlY3RlZFJlc3BvbnNlVGltZSkge1xuICAgICAgICB0aGlzLnJlY29yZEZhaWx1cmUobmV3IEVycm9yKGBSZXNwb25zZSB0aW1lICR7cmVzcG9uc2VUaW1lfW1zIGV4Y2VlZGVkIHRocmVzaG9sZCAke3RoaXMub3B0aW9ucy5leHBlY3RlZFJlc3BvbnNlVGltZX1tc2ApKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNwb25zZSB0aW1lIGV4Y2VlZGVkIHRocmVzaG9sZCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlY29yZFN1Y2Nlc3MoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMucmVjb3JkRmFpbHVyZShlcnJvciBhcyBFcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRpbWVvdXRQcm9taXNlKCk6IFByb21pc2U8bmV2ZXI+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYE9wZXJhdGlvbiB0aW1lb3V0IGFmdGVyICR7dGhpcy5vcHRpb25zLmV4cGVjdGVkUmVzcG9uc2VUaW1lfW1zYCkpO1xuICAgICAgfSwgdGhpcy5vcHRpb25zLmV4cGVjdGVkUmVzcG9uc2VUaW1lKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkU3VjY2VzcygpOiB2b2lkIHtcbiAgICB0aGlzLnN1Y2Nlc3NDb3VudCsrO1xuICAgIHRoaXMubGFzdFN1Y2Nlc3NUaW1lID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLmNvbnNlY3V0aXZlU3VjY2Vzc2VzKys7XG4gICAgdGhpcy5tZXRyaWNzLnN1Y2Nlc3NmdWxFeGVjdXRpb25zKys7XG4gICAgdGhpcy5tZXRyaWNzLmxhc3RFeGVjdXRpb25UaW1lID0gbmV3IERhdGUoKTtcblxuICAgIGlmICh0aGlzLnN0YXRlID09PSAnaGFsZi1vcGVuJykge1xuICAgICAgdGhpcy5oYWxmT3BlbkF0dGVtcHRzKys7XG4gICAgICBcbiAgICAgIC8vIOWmguaenOWNiuW8gOeKtuaAgeS4i+i/nue7reaIkOWKn+asoeaVsOi+vuWIsOmYiOWAvO+8jOWFs+mXreaWrei3r+WZqFxuICAgICAgaWYgKHRoaXMuY29uc2VjdXRpdmVTdWNjZXNzZXMgPj0gdGhpcy5vcHRpb25zLmhhbGZPcGVuTWF4QXR0ZW1wdHMhKSB7XG4gICAgICAgIHRoaXMudHJhbnNpdGlvblRvQ2xvc2VkKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgLy8g5Zyo5YWz6Zet54q25oCB5LiL77yM6YeN572u5aSx6LSl6K6h5pWwXG4gICAgICB0aGlzLmZhaWx1cmVDb3VudCA9IE1hdGgubWF4KDAsIHRoaXMuZmFpbHVyZUNvdW50IC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZWNvcmRGYWlsdXJlKGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgIHRoaXMuZmFpbHVyZUNvdW50Kys7XG4gICAgdGhpcy5sYXN0RmFpbHVyZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuY29uc2VjdXRpdmVTdWNjZXNzZXMgPSAwO1xuICAgIHRoaXMubWV0cmljcy5mYWlsZWRFeGVjdXRpb25zKys7XG4gICAgdGhpcy5tZXRyaWNzLmxhc3RFeGVjdXRpb25UaW1lID0gbmV3IERhdGUoKTtcblxuICAgIGlmICh0aGlzLnN0YXRlID09PSAnY2xvc2VkJyAmJiB0aGlzLmZhaWx1cmVDb3VudCA+PSB0aGlzLm9wdGlvbnMuZmFpbHVyZVRocmVzaG9sZCkge1xuICAgICAgdGhpcy50cmFuc2l0aW9uVG9PcGVuKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSAnaGFsZi1vcGVuJykge1xuICAgICAgdGhpcy50cmFuc2l0aW9uVG9PcGVuKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2l0aW9uVG9PcGVuKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUgPSAnb3Blbic7XG4gICAgdGhpcy5uZXh0QXR0ZW1wdFRpbWUgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgdGhpcy5vcHRpb25zLnJlY292ZXJ5VGltZW91dCk7XG4gICAgdGhpcy5oYWxmT3BlbkF0dGVtcHRzID0gMDtcbiAgICB0aGlzLm1ldHJpY3MuY2lyY3VpdE9wZW5zKys7XG4gICAgXG4gICAgY29uc29sZS53YXJuKGDwn5S0IENpcmN1aXQgYnJlYWtlciBvcGVuZWQuIE5leHQgYXR0ZW1wdCBhdCAke3RoaXMubmV4dEF0dGVtcHRUaW1lLnRvSVNPU3RyaW5nKCl9YCk7XG4gIH1cblxuICBwcml2YXRlIHRyYW5zaXRpb25Ub0hhbGZPcGVuKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUgPSAnaGFsZi1vcGVuJztcbiAgICB0aGlzLmhhbGZPcGVuQXR0ZW1wdHMgPSAwO1xuICAgIHRoaXMuY29uc2VjdXRpdmVTdWNjZXNzZXMgPSAwO1xuICAgIGNvbnNvbGUubG9nKCfwn5+hIENpcmN1aXQgYnJlYWtlciBoYWxmLW9wZW4gLSB0ZXN0aW5nIGNvbm5lY3Rpb24nKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNpdGlvblRvQ2xvc2VkKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUgPSAnY2xvc2VkJztcbiAgICB0aGlzLmZhaWx1cmVDb3VudCA9IDA7XG4gICAgdGhpcy5oYWxmT3BlbkF0dGVtcHRzID0gMDtcbiAgICB0aGlzLmNvbnNlY3V0aXZlU3VjY2Vzc2VzID0gMDtcbiAgICB0aGlzLm1ldHJpY3MuY2lyY3VpdENsb3NlcysrO1xuICAgIGNvbnNvbGUubG9nKCfwn5+iIENpcmN1aXQgYnJlYWtlciBjbG9zZWQgLSBjb25uZWN0aW9uIHJlc3RvcmVkJyk7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZEF0dGVtcHRSZXNldCgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMubmV4dEF0dGVtcHRUaW1lKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIERhdGUubm93KCkgPj0gdGhpcy5uZXh0QXR0ZW1wdFRpbWUuZ2V0VGltZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNvcmRSZXNwb25zZVRpbWUocmVzcG9uc2VUaW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3BvbnNlVGltZXMucHVzaChyZXNwb25zZVRpbWUpO1xuICAgIFxuICAgIC8vIOS/neaMgeacgOi/kTEwMOS4quWTjeW6lOaXtumXtFxuICAgIGlmICh0aGlzLnJlc3BvbnNlVGltZXMubGVuZ3RoID4gMTAwKSB7XG4gICAgICB0aGlzLnJlc3BvbnNlVGltZXMgPSB0aGlzLnJlc3BvbnNlVGltZXMuc2xpY2UoLTEwMCk7XG4gICAgfVxuICAgIFxuICAgIC8vIOabtOaWsOW5s+Wdh+WTjeW6lOaXtumXtFxuICAgIHRoaXMubWV0cmljcy5hdmVyYWdlUmVzcG9uc2VUaW1lID0gdGhpcy5yZXNwb25zZVRpbWVzLnJlZHVjZSgoc3VtLCB0aW1lKSA9PiBzdW0gKyB0aW1lLCAwKSAvIHRoaXMucmVzcG9uc2VUaW1lcy5sZW5ndGg7XG4gIH1cblxuICBnZXRTdGF0dXMoKTogQ2lyY3VpdEJyZWFrZXJTdGF0dXMge1xuICAgIGNvbnN0IGVycm9yUmF0ZSA9IHRoaXMudG90YWxSZXF1ZXN0cyA+IDAgPyB0aGlzLmZhaWx1cmVDb3VudCAvIHRoaXMudG90YWxSZXF1ZXN0cyA6IDA7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgZmFpbHVyZUNvdW50OiB0aGlzLmZhaWx1cmVDb3VudCxcbiAgICAgIHN1Y2Nlc3NDb3VudDogdGhpcy5zdWNjZXNzQ291bnQsXG4gICAgICBsYXN0RmFpbHVyZVRpbWU6IHRoaXMubGFzdEZhaWx1cmVUaW1lLFxuICAgICAgbGFzdFN1Y2Nlc3NUaW1lOiB0aGlzLmxhc3RTdWNjZXNzVGltZSxcbiAgICAgIG5leHRBdHRlbXB0VGltZTogdGhpcy5uZXh0QXR0ZW1wdFRpbWUsXG4gICAgICB0b3RhbFJlcXVlc3RzOiB0aGlzLnRvdGFsUmVxdWVzdHMsXG4gICAgICBlcnJvclJhdGUsXG4gICAgICBoYWxmT3BlbkF0dGVtcHRzOiB0aGlzLmhhbGZPcGVuQXR0ZW1wdHMsXG4gICAgICBjb25zZWN1dGl2ZVN1Y2Nlc3NlczogdGhpcy5jb25zZWN1dGl2ZVN1Y2Nlc3Nlc1xuICAgIH07XG4gIH1cblxuICBnZXRNZXRyaWNzKCk6IENpcmN1aXRCcmVha2VyTWV0cmljcyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5tZXRyaWNzIH07XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRlID0gJ2Nsb3NlZCc7XG4gICAgdGhpcy5mYWlsdXJlQ291bnQgPSAwO1xuICAgIHRoaXMuc3VjY2Vzc0NvdW50ID0gMDtcbiAgICB0aGlzLmxhc3RGYWlsdXJlVGltZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhc3RTdWNjZXNzVGltZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm5leHRBdHRlbXB0VGltZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRvdGFsUmVxdWVzdHMgPSAwO1xuICAgIHRoaXMuaGFsZk9wZW5BdHRlbXB0cyA9IDA7XG4gICAgdGhpcy5jb25zZWN1dGl2ZVN1Y2Nlc3NlcyA9IDA7XG4gICAgdGhpcy5yZXNwb25zZVRpbWVzID0gW107XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CflIQgQ2lyY3VpdCBicmVha2VyIG1hbnVhbGx5IHJlc2V0Jyk7XG4gIH1cblxuICBmb3JjZU9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy50cmFuc2l0aW9uVG9PcGVuKCk7XG4gIH1cblxuICBmb3JjZUNsb3NlKCk6IHZvaWQge1xuICAgIHRoaXMudHJhbnNpdGlvblRvQ2xvc2VkKCk7XG4gIH1cblxuICAvLyDojrflj5bmlq3ot6/lmajphY3nva5cbiAgZ2V0Q29uZmlnKCk6IENpcmN1aXRCcmVha2VyT3B0aW9ucyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5vcHRpb25zIH07XG4gIH1cblxuICAvLyDmm7TmlrDmlq3ot6/lmajphY3nva5cbiAgdXBkYXRlQ29uZmlnKG5ld09wdGlvbnM6IFBhcnRpYWw8Q2lyY3VpdEJyZWFrZXJPcHRpb25zPik6IHZvaWQge1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zLCAuLi5uZXdPcHRpb25zIH07XG4gICAgY29uc29sZS5sb2coJ+Kame+4jyAgQ2lyY3VpdCBicmVha2VyIGNvbmZpZ3VyYXRpb24gdXBkYXRlZCcpO1xuICB9XG59XG5cbi8vIOiHquWumuS5iemUmeivr+exu1xuZXhwb3J0IGNsYXNzIFNlcnZpY2VVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnU2VydmljZVVuYXZhaWxhYmxlRXJyb3InO1xuICB9XG59XG5cbi8vIOaWrei3r+WZqOeuoeeQhuWZqFxuZXhwb3J0IGNsYXNzIENpcmN1aXRCcmVha2VyTWFuYWdlciB7XG4gIHByaXZhdGUgYnJlYWtlcnM6IE1hcDxzdHJpbmcsIENpcmN1aXRCcmVha2VyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBkZWZhdWx0T3B0aW9uczogQ2lyY3VpdEJyZWFrZXJPcHRpb25zO1xuICBwcml2YXRlIG1ldHJpY3M6IE1hcDxzdHJpbmcsIENpcmN1aXRCcmVha2VyTWV0cmljcz4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoZGVmYXVsdE9wdGlvbnM6IENpcmN1aXRCcmVha2VyT3B0aW9ucykge1xuICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgfVxuXG4gIGdldEJyZWFrZXIobmFtZTogc3RyaW5nLCBvcHRpb25zPzogUGFydGlhbDxDaXJjdWl0QnJlYWtlck9wdGlvbnM+KTogQ2lyY3VpdEJyZWFrZXIge1xuICAgIGlmICghdGhpcy5icmVha2Vycy5oYXMobmFtZSkpIHtcbiAgICAgIGNvbnN0IGJyZWFrZXJPcHRpb25zID0geyAuLi50aGlzLmRlZmF1bHRPcHRpb25zLCAuLi5vcHRpb25zIH07XG4gICAgICB0aGlzLmJyZWFrZXJzLnNldChuYW1lLCBuZXcgQ2lyY3VpdEJyZWFrZXIoYnJlYWtlck9wdGlvbnMpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYnJlYWtlcnMuZ2V0KG5hbWUpITtcbiAgfVxuXG4gIGdldFN0YXR1cygpOiBSZWNvcmQ8c3RyaW5nLCBDaXJjdWl0QnJlYWtlclN0YXR1cz4ge1xuICAgIGNvbnN0IHN0YXR1czogUmVjb3JkPHN0cmluZywgQ2lyY3VpdEJyZWFrZXJTdGF0dXM+ID0ge307XG4gICAgdGhpcy5icmVha2Vycy5mb3JFYWNoKChicmVha2VyLCBuYW1lKSA9PiB7XG4gICAgICBzdGF0dXNbbmFtZV0gPSBicmVha2VyLmdldFN0YXR1cygpO1xuICAgIH0pO1xuICAgIHJldHVybiBzdGF0dXM7XG4gIH1cblxuICBnZXRNZXRyaWNzKCk6IFJlY29yZDxzdHJpbmcsIENpcmN1aXRCcmVha2VyTWV0cmljcz4ge1xuICAgIGNvbnN0IG1ldHJpY3M6IFJlY29yZDxzdHJpbmcsIENpcmN1aXRCcmVha2VyTWV0cmljcz4gPSB7fTtcbiAgICB0aGlzLmJyZWFrZXJzLmZvckVhY2goKGJyZWFrZXIsIG5hbWUpID0+IHtcbiAgICAgIG1ldHJpY3NbbmFtZV0gPSBicmVha2VyLmdldE1ldHJpY3MoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWV0cmljcztcbiAgfVxuXG4gIHJlc2V0QWxsKCk6IHZvaWQge1xuICAgIHRoaXMuYnJlYWtlcnMuZm9yRWFjaChicmVha2VyID0+IGJyZWFrZXIucmVzZXQoKSk7XG4gIH1cblxuICBmb3JjZU9wZW5BbGwoKTogdm9pZCB7XG4gICAgdGhpcy5icmVha2Vycy5mb3JFYWNoKGJyZWFrZXIgPT4gYnJlYWtlci5mb3JjZU9wZW4oKSk7XG4gIH1cblxuICBmb3JjZUNsb3NlQWxsKCk6IHZvaWQge1xuICAgIHRoaXMuYnJlYWtlcnMuZm9yRWFjaChicmVha2VyID0+IGJyZWFrZXIuZm9yY2VDbG9zZSgpKTtcbiAgfVxuXG4gIC8vIOiOt+WPluaJgOacieaWrei3r+WZqOeahOiBmuWQiOeKtuaAgVxuICBnZXRBZ2dyZWdhdGVTdGF0dXMoKToge1xuICAgIHRvdGFsQnJlYWtlcnM6IG51bWJlcjtcbiAgICBvcGVuQnJlYWtlcnM6IG51bWJlcjtcbiAgICBoYWxmT3BlbkJyZWFrZXJzOiBudW1iZXI7XG4gICAgY2xvc2VkQnJlYWtlcnM6IG51bWJlcjtcbiAgICBvdmVyYWxsSGVhbHRoOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ3VuaGVhbHRoeSc7XG4gIH0ge1xuICAgIGNvbnN0IHN0YXR1c2VzID0gdGhpcy5nZXRTdGF0dXMoKTtcbiAgICBjb25zdCB0b3RhbEJyZWFrZXJzID0gT2JqZWN0LmtleXMoc3RhdHVzZXMpLmxlbmd0aDtcbiAgICBjb25zdCBvcGVuQnJlYWtlcnMgPSBPYmplY3QudmFsdWVzKHN0YXR1c2VzKS5maWx0ZXIocyA9PiBzLnN0YXRlID09PSAnb3BlbicpLmxlbmd0aDtcbiAgICBjb25zdCBoYWxmT3BlbkJyZWFrZXJzID0gT2JqZWN0LnZhbHVlcyhzdGF0dXNlcykuZmlsdGVyKHMgPT4gcy5zdGF0ZSA9PT0gJ2hhbGYtb3BlbicpLmxlbmd0aDtcbiAgICBjb25zdCBjbG9zZWRCcmVha2VycyA9IE9iamVjdC52YWx1ZXMoc3RhdHVzZXMpLmZpbHRlcihzID0+IHMuc3RhdGUgPT09ICdjbG9zZWQnKS5sZW5ndGg7XG5cbiAgICBsZXQgb3ZlcmFsbEhlYWx0aDogJ2hlYWx0aHknIHwgJ2RlZ3JhZGVkJyB8ICd1bmhlYWx0aHknID0gJ2hlYWx0aHknO1xuICAgIFxuICAgIGlmIChvcGVuQnJlYWtlcnMgPiAwKSB7XG4gICAgICBvdmVyYWxsSGVhbHRoID0gb3BlbkJyZWFrZXJzID4gdG90YWxCcmVha2VycyAqIDAuNSA/ICd1bmhlYWx0aHknIDogJ2RlZ3JhZGVkJztcbiAgICB9IGVsc2UgaWYgKGhhbGZPcGVuQnJlYWtlcnMgPiAwKSB7XG4gICAgICBvdmVyYWxsSGVhbHRoID0gJ2RlZ3JhZGVkJztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxCcmVha2VycyxcbiAgICAgIG9wZW5CcmVha2VycyxcbiAgICAgIGhhbGZPcGVuQnJlYWtlcnMsXG4gICAgICBjbG9zZWRCcmVha2VycyxcbiAgICAgIG92ZXJhbGxIZWFsdGhcbiAgICB9O1xuICB9XG59XG5cbi8vIOWFqOWxgOaWrei3r+WZqOeuoeeQhuWZqOWunuS+i1xuZXhwb3J0IGNvbnN0IGNpcmN1aXRCcmVha2VyTWFuYWdlciA9IG5ldyBDaXJjdWl0QnJlYWtlck1hbmFnZXIoe1xuICBmYWlsdXJlVGhyZXNob2xkOiA1LFxuICByZWNvdmVyeVRpbWVvdXQ6IDYwMDAwLFxuICBleHBlY3RlZFJlc3BvbnNlVGltZTogNTAwMCxcbiAgaGFsZk9wZW5NYXhBdHRlbXB0czogM1xufSk7ICJdLCJuYW1lcyI6WyJDaXJjdWl0QnJlYWtlciIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInN0YXRlIiwiZmFpbHVyZUNvdW50Iiwic3VjY2Vzc0NvdW50IiwidG90YWxSZXF1ZXN0cyIsImhhbGZPcGVuQXR0ZW1wdHMiLCJjb25zZWN1dGl2ZVN1Y2Nlc3NlcyIsIm1ldHJpY3MiLCJ0b3RhbEV4ZWN1dGlvbnMiLCJzdWNjZXNzZnVsRXhlY3V0aW9ucyIsImZhaWxlZEV4ZWN1dGlvbnMiLCJjaXJjdWl0T3BlbnMiLCJjaXJjdWl0Q2xvc2VzIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsInJlc3BvbnNlVGltZXMiLCJtb25pdG9yaW5nV2luZG93IiwiaGFsZk9wZW5NYXhBdHRlbXB0cyIsImV4ZWN1dGUiLCJmbiIsInNob3VsZEF0dGVtcHRSZXNldCIsInRyYW5zaXRpb25Ub0hhbGZPcGVuIiwiU2VydmljZVVuYXZhaWxhYmxlRXJyb3IiLCJuZXh0QXR0ZW1wdFRpbWUiLCJ0b0lTT1N0cmluZyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyZXN1bHQiLCJQcm9taXNlIiwicmFjZSIsImNyZWF0ZVRpbWVvdXRQcm9taXNlIiwicmVzcG9uc2VUaW1lIiwicmVjb3JkUmVzcG9uc2VUaW1lIiwiZXhwZWN0ZWRSZXNwb25zZVRpbWUiLCJyZWNvcmRGYWlsdXJlIiwiRXJyb3IiLCJyZWNvcmRTdWNjZXNzIiwiZXJyb3IiLCJfIiwicmVqZWN0Iiwic2V0VGltZW91dCIsImxhc3RTdWNjZXNzVGltZSIsImxhc3RFeGVjdXRpb25UaW1lIiwidHJhbnNpdGlvblRvQ2xvc2VkIiwiTWF0aCIsIm1heCIsImxhc3RGYWlsdXJlVGltZSIsImZhaWx1cmVUaHJlc2hvbGQiLCJ0cmFuc2l0aW9uVG9PcGVuIiwicmVjb3ZlcnlUaW1lb3V0IiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJnZXRUaW1lIiwicHVzaCIsImxlbmd0aCIsInNsaWNlIiwicmVkdWNlIiwic3VtIiwidGltZSIsImdldFN0YXR1cyIsImVycm9yUmF0ZSIsImdldE1ldHJpY3MiLCJyZXNldCIsInVuZGVmaW5lZCIsImZvcmNlT3BlbiIsImZvcmNlQ2xvc2UiLCJnZXRDb25maWciLCJ1cGRhdGVDb25maWciLCJuZXdPcHRpb25zIiwibWVzc2FnZSIsIm5hbWUiLCJDaXJjdWl0QnJlYWtlck1hbmFnZXIiLCJkZWZhdWx0T3B0aW9ucyIsImJyZWFrZXJzIiwiTWFwIiwiZ2V0QnJlYWtlciIsImhhcyIsImJyZWFrZXJPcHRpb25zIiwic2V0IiwiZ2V0Iiwic3RhdHVzIiwiZm9yRWFjaCIsImJyZWFrZXIiLCJyZXNldEFsbCIsImZvcmNlT3BlbkFsbCIsImZvcmNlQ2xvc2VBbGwiLCJnZXRBZ2dyZWdhdGVTdGF0dXMiLCJzdGF0dXNlcyIsInRvdGFsQnJlYWtlcnMiLCJPYmplY3QiLCJrZXlzIiwib3BlbkJyZWFrZXJzIiwidmFsdWVzIiwiZmlsdGVyIiwicyIsImhhbGZPcGVuQnJlYWtlcnMiLCJjbG9zZWRCcmVha2VycyIsIm92ZXJhbGxIZWFsdGgiLCJjaXJjdWl0QnJlYWtlck1hbmFnZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/circuitBreaker.ts\n");

/***/ })

};
;