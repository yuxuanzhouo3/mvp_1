(()=>{var e={};e.id=7576,e.ids=[7576],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},6393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>d});var a=s(67096),r=s(16132),i=s(37284),l=s.n(i),c=s(32564),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);s.d(t,n);let d=["",{children:["chat",{children:["[chatId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,80180)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/chat/[chatId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,62111)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,38196)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/not-found.tsx"]}],o=["/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/chat/[chatId]/page.tsx"],u="/chat/[chatId]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/chat/[chatId]/page",pathname:"/chat/[chatId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12187:(e,t,s)=>{Promise.resolve().then(s.bind(s,75772))},75772:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(53854),r=s(34218),i=s(51018),l=s(86665),c=s(63165),n=s(7857),d=s(24769),o=s(39195),u=s(26115),m=s(31974),x=s(2882),h=s(24234),p=s(86974),f=s(72024),g=s(88745),y=s(49425),v=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let File=(0,v.Z)("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),j=(0,v.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Image=(0,v.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),b=(0,v.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var w=s(18055);function N(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),{user:s}=(0,l.a)(),{toast:v}=(0,m.p)(),N=e.chatId,[k,_]=(0,r.useState)([]),[S,I]=(0,r.useState)(null),[q,C]=(0,r.useState)(""),[z,E]=(0,r.useState)(!1),[Z,P]=(0,r.useState)(!0),[R,T]=(0,r.useState)(!1),L=(0,r.useRef)(null),$=(0,r.useRef)(null),D=(0,r.useRef)(null),{sendMessage:M,isConnected:A}=function(e={}){let{user:t}=(0,l.a)(),[s,a]=(0,r.useState)([]),[i,c]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!1),[o,u]=(0,r.useState)(new Set),m=(0,r.useRef)(null),x=(0,r.useRef)(null),h=(0,r.useCallback)(()=>{if(!t||!e.chatId)return;let s=new WebSocket(`${process.env.NEXT_PUBLIC_WS_URL}/chat/${e.chatId}`);m.current=s,s.onopen=()=>{c(!0)},s.onmessage=t=>{try{let s=JSON.parse(t.data);switch(s.type){case"message":let r=s.message;a(e=>[...e,r]),e.onMessageReceived?.(r);break;case"typing_start":u(e=>new Set(e).add(s.userId)),e.onTyping?.(s.userId,!0);break;case"typing_stop":u(e=>{let t=new Set(e);return t.delete(s.userId),t}),e.onTyping?.(s.userId,!1);break;case"ai_response":let i=s.message;a(e=>[...e,i]),e.onMessageReceived?.(i)}}catch(e){}},s.onclose=()=>{c(!1)},s.onerror=e=>{c(!1)}},[t,e.chatId,e.onMessageReceived,e.onTyping]),p=(0,r.useCallback)(()=>{m.current&&(m.current.close(),m.current=null)},[]),f=(0,r.useCallback)(async(s,a=[])=>{if(!t||!e.chatId||!i)return;let r={content:s,sender_id:t.id,chat_id:e.chatId,is_ai:!1,attachments:a};m.current?.send(JSON.stringify({type:"message",message:r}));try{await fetch("/api/chat/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(e){}},[t,e.chatId,i]),g=(0,r.useCallback)(s=>{t&&e.chatId&&i&&(m.current?.send(JSON.stringify({type:"typing",userId:t.id,isTyping:s})),d(s))},[t,e.chatId,i]),y=(0,r.useCallback)(async()=>{if(e.chatId)try{let t=await fetch(`/api/chat/messages?chatId=${e.chatId}`);if(t.ok){let e=await t.json();a(e.messages||[])}}catch(e){}},[e.chatId]),v=(0,r.useCallback)(async s=>{t&&e.chatId&&m.current?.send(JSON.stringify({type:"ai_message",content:s,userId:t.id,chatId:e.chatId}))},[t,e.chatId]);return(0,r.useEffect)(()=>(n&&(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{g(!1)},3e3)),()=>{x.current&&clearTimeout(x.current)}),[n,g]),(0,r.useEffect)(()=>(e.chatId&&(h(),y()),()=>{p()}),[e.chatId,h,p,y]),{messages:s,isConnected:i,isTyping:n,typingUsers:o,sendMessage:f,sendTyping:g,sendAIMessage:v,loadMessages:y}}({chatId:N});(0,r.useEffect)(()=>{if(!s){t.push("/auth/login");return}O()},[N,s]),(0,r.useEffect)(()=>{U()},[k]);let O=async()=>{try{P(!0);let e=await fetch(`/api/chat/${N}/messages`);if(e.ok){let t=await e.json();_(t.messages)}let t=await fetch(`/api/chat/${N}/user`);if(t.ok){let e=await t.json();I(e.user)}}catch(e){v({title:"加载失败",description:"无法加载聊天数据",variant:"destructive"})}finally{P(!1)}},U=()=>{L.current?.scrollIntoView({behavior:"smooth"})},G=async()=>{if(q.trim()&&A)try{await M(q),C("")}catch(e){v({title:"发送失败",description:"消息发送失败，请重试",variant:"destructive"})}},V=async e=>{let t=e.target.files?.[0];if(t)try{let e=new FormData;e.append("file",t),e.append("chatId",N);let s=await fetch("/api/chat/upload",{method:"POST",body:e});if(s.ok){let e=await s.json();await M("",[e.file_url]),v({title:"文件上传成功",description:"文件已发送"})}}catch(e){v({title:"上传失败",description:"文件上传失败，请重试",variant:"destructive"})}},F=async e=>{let t=e.target.files?.[0];if(t)try{let e=new FormData;e.append("image",t),e.append("chatId",N);let s=await fetch("/api/chat/upload-image",{method:"POST",body:e});if(s.ok){let e=await s.json();await M("",[e.image_url]),v({title:"图片上传成功",description:"图片已发送"})}}catch(e){v({title:"上传失败",description:"图片上传失败，请重试",variant:"destructive"})}},W=e=>{let t=new Date(e),s=new Date,a=(s.getTime()-t.getTime())/36e5;return a<24?t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("zh-CN")};return Z?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"加载聊天中..."})]})}):S?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>t.push("/chat"),className:"lg:hidden",children:a.jsx(x.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(o.qE,{children:[a.jsx(o.F$,{src:S.avatar_url}),a.jsx(o.Q5,{children:S.full_name?.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:S.full_name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${S.is_online?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.is_online?"在线":"离线"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(n.z,{variant:"ghost",size:"sm",children:a.jsx(h.Z,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"ghost",size:"sm",children:a.jsx(p.Z,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"ghost",size:"sm",children:a.jsx(f.Z,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"ghost",size:"sm",children:a.jsx(g.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===k.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(y.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:["开始与 ",S.full_name," 的对话"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"发送第一条消息来开始聊天"})]}):k.map(e=>{let t=e.sender_id===s?.id;return a.jsx("div",{className:`flex ${t?"justify-end":"justify-start"}`,children:(0,a.jsxs)("div",{className:`flex items-end space-x-2 max-w-xs lg:max-w-md ${t?"flex-row-reverse space-x-reverse":""}`,children:[!t&&(0,a.jsxs)(o.qE,{className:"h-8 w-8",children:[a.jsx(o.F$,{src:S.avatar_url}),a.jsx(o.Q5,{children:S.full_name?.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{className:`rounded-lg px-4 py-2 ${t?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:["text"===e.message_type&&a.jsx("p",{className:"text-sm",children:e.content}),"image"===e.message_type&&a.jsx("img",{src:e.file_url,alt:"Shared image",className:"rounded max-w-full h-auto"}),"file"===e.message_type&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(File,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"文件已发送"})]}),(0,a.jsxs)("div",{className:`text-xs mt-1 ${t?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:[W(e.created_at),t&&a.jsx("span",{className:"ml-2",children:e.is_read?"✓✓":"✓"})]})]})]})},e.id)}),z&&a.jsx("div",{className:"flex justify-start",children:(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsxs)(o.qE,{className:"h-8 w-8",children:[a.jsx(o.F$,{src:S.avatar_url}),a.jsx(o.Q5,{children:S.full_name?.charAt(0).toUpperCase()})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-4 py-2",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),a.jsx("div",{ref:L})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>T(!R),children:a.jsx(j,{className:"h-4 w-4"})}),R&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>D.current?.click(),children:a.jsx(Image,{className:"h-4 w-4"})}),a.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>$.current?.click(),children:a.jsx(File,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1",children:a.jsx(d.I,{value:q,onChange:e=>C(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())},placeholder:"输入消息...",className:"border-0 focus:ring-0"})}),a.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>{},children:a.jsx(b,{className:"h-4 w-4"})}),a.jsx(n.z,{onClick:G,disabled:!q.trim()||!A,size:"sm",children:a.jsx(w.Z,{className:"h-4 w-4"})})]}),!A&&a.jsx("div",{className:"mt-2 text-center",children:a.jsx(u.C,{variant:"destructive",className:"text-xs",children:"连接断开，正在重连..."})})]}),a.jsx("input",{ref:$,type:"file",className:"hidden",onChange:V,accept:".pdf,.doc,.docx,.txt"}),a.jsx("input",{ref:D,type:"file",className:"hidden",onChange:F,accept:"image/*"})]}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-md",children:[a.jsx(c.Ol,{children:a.jsx(c.ll,{children:"聊天未找到"})}),a.jsx(c.aY,{children:a.jsx(n.z,{onClick:()=>t.push("/chat"),className:"w-full",children:"返回聊天列表"})})]})})}},39195:(e,t,s)=>{"use strict";s.d(t,{F$:()=>n,Q5:()=>d,qE:()=>c});var a=s(53854),r=s(34218),i=s(49198),l=s(56370);let c=r.forwardRef(({className:e,...t},s)=>a.jsx(i.fC,{ref:s,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));c.displayName=i.fC.displayName;let n=r.forwardRef(({className:e,...t},s)=>a.jsx(i.Ee,{ref:s,className:(0,l.cn)("aspect-square h-full w-full",e),...t}));n.displayName=i.Ee.displayName;let d=r.forwardRef(({className:e,...t},s)=>a.jsx(i.NY,{ref:s,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));d.displayName=i.NY.displayName},24769:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var a=s(53854),r=s(34218),i=s(56370);let l=r.forwardRef(({className:e,type:t,label:s,error:r,icon:l,description:c,...n},d)=>(0,a.jsxs)("div",{className:"w-full space-y-1",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-foreground",children:s}),(0,a.jsxs)("div",{className:"relative",children:[l&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l}),a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",l?"pl-10":"",r?"border-destructive focus-visible:ring-destructive/30":"",e),ref:d,...n})]}),c&&!r&&a.jsx("p",{className:"text-xs text-muted-foreground",children:c}),r&&a.jsx("p",{className:"text-xs text-destructive",children:r})]}));l.displayName="Input"},31974:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s(70664);let r=a.pm},2882:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},49425:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},88745:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},86974:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},24234:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18055:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},72024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},42380:(e,t,s)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=s(34218);"function"==typeof Object.is&&Object.is,a.useState,a.useEffect,a.useLayoutEffect,a.useDebugValue,t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:function(e,t){return t()}},41913:(e,t,s)=>{"use strict";e.exports=s(42380)},80180:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});var a=s(95153);let r=(0,a.createProxy)(String.raw`/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/chat/[chatId]/page.tsx`),{__esModule:i,$$typeof:l}=r,c=r.default,n=c},49198:(e,t,s)=>{"use strict";s.d(t,{NY:()=>N,Ee:()=>Image,fC:()=>w});var a=s(34218),r=s(65864),i=s(64928),l=s(76223),c=s(59280),n=s(41913);function d(){return()=>{}}var o=s(53854),u="Avatar",[m,x]=(0,r.b)(u),[h,p]=m(u),f=a.forwardRef((e,t)=>{let{__scopeAvatar:s,...r}=e,[i,l]=a.useState("idle");return(0,o.jsx)(h,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:(0,o.jsx)(c.WV.span,{...r,ref:t})})});f.displayName=u;var g="AvatarImage",y=a.forwardRef((e,t)=>{let{__scopeAvatar:s,src:r,onLoadingStatusChange:u=()=>{},...m}=e,x=p(g,s),h=function(e,{referrerPolicy:t,crossOrigin:s}){let r=(0,n.useSyncExternalStore)(d,()=>!0,()=>!1),i=a.useRef(null),c=r?(i.current||(i.current=new window.Image),i.current):null,[o,u]=a.useState(()=>b(c,e));return(0,l.b)(()=>{u(b(c,e))},[c,e]),(0,l.b)(()=>{let e=e=>()=>{u(e)};if(!c)return;let a=e("loaded"),r=e("error");return c.addEventListener("load",a),c.addEventListener("error",r),t&&(c.referrerPolicy=t),"string"==typeof s&&(c.crossOrigin=s),()=>{c.removeEventListener("load",a),c.removeEventListener("error",r)}},[c,s,t]),o}(r,m),f=(0,i.W)(e=>{u(e),x.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==h&&f(h)},[h,f]),"loaded"===h?(0,o.jsx)(c.WV.img,{...m,ref:t,src:r}):null});y.displayName=g;var v="AvatarFallback",j=a.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:r,...i}=e,l=p(v,s),[n,d]=a.useState(void 0===r);return a.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(e)}},[r]),n&&"loaded"!==l.imageLoadingStatus?(0,o.jsx)(c.WV.span,{...i,ref:t}):null});function b(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}j.displayName=v;var w=f,Image=y,N=j}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[3271,7085,7149],()=>s(6393));module.exports=a})();