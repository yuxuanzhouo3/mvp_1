"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/system/health/route";
exports.ids = ["app/api/system/health/route"];
exports.modules = {

/***/ "@upstash/redis":
/*!*********************************!*\
  !*** external "@upstash/redis" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@upstash/redis");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsystem%2Fhealth%2Froute&page=%2Fapi%2Fsystem%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsystem%2Fhealth%2Froute.ts&appDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsystem%2Fhealth%2Froute&page=%2Fapi%2Fsystem%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsystem%2Fhealth%2Froute.ts&appDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mac_guest1_Downloads_Git_mvp_projects_mvp_1_app_api_system_health_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/system/health/route.ts */ \"(rsc)/./app/api/system/health/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/system/health/route\",\n        pathname: \"/api/system/health\",\n        filename: \"route\",\n        bundlePath: \"app/api/system/health/route\"\n    },\n    resolvedPagePath: \"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/api/system/health/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mac_guest1_Downloads_Git_mvp_projects_mvp_1_app_api_system_health_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/system/health/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzeXN0ZW0lMkZoZWFsdGglMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN5c3RlbSUyRmhlYWx0aCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN5c3RlbSUyRmhlYWx0aCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hYy1ndWVzdDElMkZEb3dubG9hZHMlMkZHaXQlMkZtdnBfcHJvamVjdHMlMkZtdnBfMSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYWMtZ3Vlc3QxJTJGRG93bmxvYWRzJTJGR2l0JTJGbXZwX3Byb2plY3RzJTJGbXZwXzEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGVyc29uYWxpbmsvPzk3N2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hYy1ndWVzdDEvRG93bmxvYWRzL0dpdC9tdnBfcHJvamVjdHMvbXZwXzEvYXBwL2FwaS9zeXN0ZW0vaGVhbHRoL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3lzdGVtL2hlYWx0aC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N5c3RlbS9oZWFsdGhcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N5c3RlbS9oZWFsdGgvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFjLWd1ZXN0MS9Eb3dubG9hZHMvR2l0L212cF9wcm9qZWN0cy9tdnBfMS9hcHAvYXBpL3N5c3RlbS9oZWFsdGgvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3lzdGVtL2hlYWx0aC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsystem%2Fhealth%2Froute&page=%2Fapi%2Fsystem%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsystem%2Fhealth%2Froute.ts&appDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/system/health/route.ts":
/*!****************************************!*\
  !*** ./app/api/system/health/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\nasync function GET(request) {\n    const startTime = Date.now();\n    try {\n        // Check if we're in mock mode\n        const isMockMode = \"https://bamratexknmqvdbalzen.supabase.co\" === \"https://mock.supabase.co\";\n        if (isMockMode) {\n            // Return mock system health data\n            const mockHealth = {\n                timestamp: new Date().toISOString(),\n                environment: \"development\" || 0,\n                mode: \"mock\",\n                database: {\n                    status: \"healthy\",\n                    response_time: 50,\n                    active_connections: 1,\n                    queue_size: 0,\n                    error_rate: 0,\n                    last_check: new Date().toISOString()\n                },\n                api_modules: {\n                    auth: {\n                        last_24h_requests: 1250,\n                        last_24h_errors: 2,\n                        success_rate: 99.84,\n                        avg_response_time: 145,\n                        last_error: \"Invalid credentials\",\n                        last_error_time: new Date(Date.now() - 3600000).toISOString()\n                    },\n                    pay: {\n                        last_24h_requests: 89,\n                        last_24h_errors: 0,\n                        success_rate: 100.0,\n                        avg_response_time: 234\n                    },\n                    chat: {\n                        last_24h_requests: 3420,\n                        last_24h_errors: 12,\n                        success_rate: 99.65,\n                        avg_response_time: 89,\n                        last_error: \"Message delivery failed\",\n                        last_error_time: new Date(Date.now() - 1800000).toISOString()\n                    },\n                    match: {\n                        last_24h_requests: 567,\n                        last_24h_errors: 3,\n                        success_rate: 99.47,\n                        avg_response_time: 312,\n                        last_error: \"Matching algorithm timeout\",\n                        last_error_time: new Date(Date.now() - 7200000).toISOString()\n                    }\n                },\n                circuit_breakers: {\n                    total_breakers: 4,\n                    open_breakers: 0,\n                    half_open_breakers: 0,\n                    closed_breakers: 4,\n                    details: {\n                        auth: {\n                            state: \"closed\",\n                            failureCount: 0\n                        },\n                        database: {\n                            state: \"closed\",\n                            failureCount: 0\n                        },\n                        payment: {\n                            state: \"closed\",\n                            failureCount: 0\n                        },\n                        matching: {\n                            state: \"closed\",\n                            failureCount: 0\n                        }\n                    }\n                },\n                redis: {\n                    status: \"connected\",\n                    response_time: 25,\n                    memory_usage: 1024,\n                    connected_clients: 1\n                },\n                overall_status: \"healthy\",\n                response_time: Date.now() - startTime\n            };\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(mockHealth);\n        }\n        // Real system health check (import modules dynamically to avoid issues)\n        const { db, initializeDatabase } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/tr46\"), __webpack_require__.e(\"vendor-chunks/ws\"), __webpack_require__.e(\"vendor-chunks/whatwg-url\"), __webpack_require__.e(\"vendor-chunks/isows\"), __webpack_require__.e(\"_rsc_lib_db_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/db */ \"(rsc)/./lib/db.ts\"));\n        const { circuitBreakerManager } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_utils_circuitBreaker_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/utils/circuitBreaker */ \"(rsc)/./lib/utils/circuitBreaker.ts\"));\n        // Ensure database is initialized\n        if (!db.getStats) {\n            initializeDatabase();\n        }\n        const health = {\n            timestamp: new Date().toISOString(),\n            environment: \"development\" || 0,\n            mode: \"real\",\n            database: await getDatabaseHealth(db),\n            api_modules: await getApiModulesHealth(),\n            circuit_breakers: getCircuitBreakersHealth(circuitBreakerManager),\n            redis: await getRedisHealth(),\n            overall_status: \"healthy\"\n        };\n        // Calculate overall status\n        health.overall_status = calculateOverallStatus(health);\n        const responseTime = Date.now() - startTime;\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            ...health,\n            response_time: responseTime\n        });\n    } catch (error) {\n        console.error(\"Health check failed:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            timestamp: new Date().toISOString(),\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            response_time: Date.now() - startTime,\n            mode: \"error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function getDatabaseHealth(db) {\n    try {\n        // Check if database is properly initialized\n        if (!db || !db.getStats || !db.getHealthStatus) {\n            return {\n                status: \"unhealthy\",\n                response_time: 0,\n                active_connections: 0,\n                queue_size: 0,\n                error_rate: 1,\n                last_check: new Date().toISOString(),\n                error: \"Database not properly initialized\"\n            };\n        }\n        const dbStats = db.getStats();\n        const healthStatus = db.getHealthStatus();\n        return {\n            status: healthStatus.status,\n            response_time: healthStatus.responseTime,\n            active_connections: healthStatus.activeConnections,\n            queue_size: healthStatus.queueSize,\n            error_rate: healthStatus.errorCount / Math.max(healthStatus.successCount + healthStatus.errorCount, 1),\n            last_check: healthStatus.lastCheck.toISOString()\n        };\n    } catch (error) {\n        return {\n            status: \"unhealthy\",\n            response_time: 0,\n            active_connections: 0,\n            queue_size: 0,\n            error_rate: 1,\n            last_check: new Date().toISOString(),\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\nasync function getApiModulesHealth() {\n    // Mock data for now\n    return {\n        auth: {\n            last_24h_requests: 1250,\n            last_24h_errors: 2,\n            success_rate: 99.84,\n            avg_response_time: 145,\n            last_error: \"Invalid credentials\",\n            last_error_time: new Date(Date.now() - 3600000).toISOString()\n        },\n        pay: {\n            last_24h_requests: 89,\n            last_24h_errors: 0,\n            success_rate: 100.0,\n            avg_response_time: 234\n        },\n        chat: {\n            last_24h_requests: 3420,\n            last_24h_errors: 12,\n            success_rate: 99.65,\n            avg_response_time: 89,\n            last_error: \"Message delivery failed\",\n            last_error_time: new Date(Date.now() - 1800000).toISOString()\n        },\n        match: {\n            last_24h_requests: 567,\n            last_24h_errors: 3,\n            success_rate: 99.47,\n            avg_response_time: 312,\n            last_error: \"Matching algorithm timeout\",\n            last_error_time: new Date(Date.now() - 7200000).toISOString()\n        }\n    };\n}\nfunction getCircuitBreakersHealth(circuitBreakerManager) {\n    try {\n        const status = circuitBreakerManager.getStatus();\n        const breakers = Object.values(status);\n        return {\n            total_breakers: breakers.length,\n            open_breakers: breakers.filter((b)=>b.state === \"open\").length,\n            half_open_breakers: breakers.filter((b)=>b.state === \"half-open\").length,\n            closed_breakers: breakers.filter((b)=>b.state === \"closed\").length,\n            details: status\n        };\n    } catch (error) {\n        return {\n            total_breakers: 0,\n            open_breakers: 0,\n            half_open_breakers: 0,\n            closed_breakers: 0,\n            details: {}\n        };\n    }\n}\nasync function getRedisHealth() {\n    try {\n        const url = process.env.UPSTASH_REDIS_URL?.trim();\n        const token = process.env.UPSTASH_REDIS_TOKEN?.trim();\n        if (!url || !token) {\n            return {\n                status: \"disconnected\",\n                response_time: 0,\n                memory_usage: 0,\n                connected_clients: 0,\n                last_error: \"Missing Redis environment variables\"\n            };\n        }\n        const { Redis } = __webpack_require__(/*! @upstash/redis */ \"@upstash/redis\");\n        const redis = new Redis({\n            url,\n            token\n        });\n        const startTime = Date.now();\n        await redis.set(\"health_check\", \"ok\", {\n            ex: 60\n        });\n        const responseTime = Date.now() - startTime;\n        return {\n            status: \"connected\",\n            response_time: responseTime,\n            memory_usage: 1024,\n            connected_clients: 1\n        };\n    } catch (error) {\n        return {\n            status: \"error\",\n            response_time: 0,\n            memory_usage: 0,\n            connected_clients: 0,\n            last_error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\nfunction calculateOverallStatus(health) {\n    const issues = [];\n    // Check database status\n    if (health.database.status === \"unhealthy\") issues.push(\"database_unhealthy\");\n    if (health.database.error_rate > 0.1) issues.push(\"database_high_error_rate\");\n    // Check API modules\n    Object.entries(health.api_modules).forEach(([module, metrics])=>{\n        if (metrics.success_rate < 95) issues.push(`${module}_low_success_rate`);\n    });\n    // Check circuit breakers\n    if (health.circuit_breakers.open_breakers > 0) issues.push(\"circuit_breakers_open\");\n    // Check Redis\n    if (health.redis.status === \"error\") issues.push(\"redis_error\");\n    if (issues.length === 0) return \"healthy\";\n    if (issues.length <= 2) return \"degraded\";\n    return \"unhealthy\";\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { action } = body;\n        switch(action){\n            case \"reset_circuit_breakers\":\n                // This action is not directly applicable in mock mode,\n                // but for consistency, we can return a success message.\n                // In a real scenario, you'd need to import the manager.\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    status: \"success\",\n                    message: \"Circuit breakers reset (mock mode)\"\n                });\n            case \"force_close_circuit_breakers\":\n                // This action is not directly applicable in mock mode,\n                // but for consistency, we can return a success message.\n                // In a real scenario, you'd need to import the manager.\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    status: \"success\",\n                    message: \"Circuit breakers forced closed (mock mode)\"\n                });\n            case \"reset_database_connection\":\n                // This action is not directly applicable in mock mode,\n                // but for consistency, we can return a success message.\n                // In a real scenario, you'd need to import the db module.\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    status: \"success\",\n                    message: \"Database connection reset (mock mode)\"\n                });\n            case \"clear_redis_cache\":\n                // This action is not directly applicable in mock mode,\n                // but for consistency, we can return a success message.\n                // In a real scenario, you'd need to import the Redis client.\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    status: \"success\",\n                    message: \"Redis cache cleared (mock mode)\"\n                });\n            default:\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    status: \"error\",\n                    message: \"Invalid action\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Health POST error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLO2dCQUNILHVEQUF1RDtnQkFDdkQsd0RBQXdEO2dCQUN4RCx3REFBd0Q7Z0JBQ3hELE9BQU83RCxrRkFBWUEsQ0FBQytDLElBQUksQ0FBQztvQkFDdkIvQixRQUFRO29CQUNSNkMsU0FBUztnQkFDWDtZQUVGLEtBQUs7Z0JBQ0gsdURBQXVEO2dCQUN2RCx3REFBd0Q7Z0JBQ3hELDBEQUEwRDtnQkFDMUQsT0FBTzdELGtGQUFZQSxDQUFDK0MsSUFBSSxDQUFDO29CQUN2Qi9CLFFBQVE7b0JBQ1I2QyxTQUFTO2dCQUNYO1lBRUYsS0FBSztnQkFDSCx1REFBdUQ7Z0JBQ3ZELHdEQUF3RDtnQkFDeEQsNkRBQTZEO2dCQUM3RCxPQUFPN0Qsa0ZBQVlBLENBQUMrQyxJQUFJLENBQUM7b0JBQ3ZCL0IsUUFBUTtvQkFDUjZDLFNBQVM7Z0JBQ1g7WUFFRjtnQkFDRSxPQUFPN0Qsa0ZBQVlBLENBQUMrQyxJQUFJLENBQUM7b0JBQ3ZCL0IsUUFBUTtvQkFDUjZDLFNBQVM7Z0JBQ1gsR0FBRztvQkFBRTdDLFFBQVE7Z0JBQUk7UUFDckI7SUFFRixFQUFFLE9BQU8yQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE9BQU8zRCxrRkFBWUEsQ0FBQytDLElBQUksQ0FBQztZQUN2Qi9CLFFBQVE7WUFDUjZDLFNBQVNGLGlCQUFpQkcsUUFBUUgsTUFBTUUsT0FBTyxHQUFHO1FBQ3BELEdBQUc7WUFBRTdDLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGVyc29uYWxpbmsvLi9hcHAvYXBpL3N5c3RlbS9oZWFsdGgvcm91dGUudHM/ZTdkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gIFxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIG1vY2sgbW9kZVxuICAgIGNvbnN0IGlzTW9ja01vZGUgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgPT09ICdodHRwczovL21vY2suc3VwYWJhc2UuY28nO1xuICAgIFxuICAgIGlmIChpc01vY2tNb2RlKSB7XG4gICAgICAvLyBSZXR1cm4gbW9jayBzeXN0ZW0gaGVhbHRoIGRhdGFcbiAgICAgIGNvbnN0IG1vY2tIZWFsdGggPSB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JyxcbiAgICAgICAgbW9kZTogJ21vY2snLFxuICAgICAgICBkYXRhYmFzZToge1xuICAgICAgICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgICAgICAgIHJlc3BvbnNlX3RpbWU6IDUwLFxuICAgICAgICAgIGFjdGl2ZV9jb25uZWN0aW9uczogMSxcbiAgICAgICAgICBxdWV1ZV9zaXplOiAwLFxuICAgICAgICAgIGVycm9yX3JhdGU6IDAsXG4gICAgICAgICAgbGFzdF9jaGVjazogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0sXG4gICAgICAgIGFwaV9tb2R1bGVzOiB7XG4gICAgICAgICAgYXV0aDoge1xuICAgICAgICAgICAgbGFzdF8yNGhfcmVxdWVzdHM6IDEyNTAsXG4gICAgICAgICAgICBsYXN0XzI0aF9lcnJvcnM6IDIsXG4gICAgICAgICAgICBzdWNjZXNzX3JhdGU6IDk5Ljg0LFxuICAgICAgICAgICAgYXZnX3Jlc3BvbnNlX3RpbWU6IDE0NSxcbiAgICAgICAgICAgIGxhc3RfZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyxcbiAgICAgICAgICAgIGxhc3RfZXJyb3JfdGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDM2MDAwMDApLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBheToge1xuICAgICAgICAgICAgbGFzdF8yNGhfcmVxdWVzdHM6IDg5LFxuICAgICAgICAgICAgbGFzdF8yNGhfZXJyb3JzOiAwLFxuICAgICAgICAgICAgc3VjY2Vzc19yYXRlOiAxMDAuMCxcbiAgICAgICAgICAgIGF2Z19yZXNwb25zZV90aW1lOiAyMzQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjaGF0OiB7XG4gICAgICAgICAgICBsYXN0XzI0aF9yZXF1ZXN0czogMzQyMCxcbiAgICAgICAgICAgIGxhc3RfMjRoX2Vycm9yczogMTIsXG4gICAgICAgICAgICBzdWNjZXNzX3JhdGU6IDk5LjY1LFxuICAgICAgICAgICAgYXZnX3Jlc3BvbnNlX3RpbWU6IDg5LFxuICAgICAgICAgICAgbGFzdF9lcnJvcjogJ01lc3NhZ2UgZGVsaXZlcnkgZmFpbGVkJyxcbiAgICAgICAgICAgIGxhc3RfZXJyb3JfdGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDE4MDAwMDApLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICBsYXN0XzI0aF9yZXF1ZXN0czogNTY3LFxuICAgICAgICAgICAgbGFzdF8yNGhfZXJyb3JzOiAzLFxuICAgICAgICAgICAgc3VjY2Vzc19yYXRlOiA5OS40NyxcbiAgICAgICAgICAgIGF2Z19yZXNwb25zZV90aW1lOiAzMTIsXG4gICAgICAgICAgICBsYXN0X2Vycm9yOiAnTWF0Y2hpbmcgYWxnb3JpdGhtIHRpbWVvdXQnLFxuICAgICAgICAgICAgbGFzdF9lcnJvcl90aW1lOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNzIwMDAwMCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2lyY3VpdF9icmVha2Vyczoge1xuICAgICAgICAgIHRvdGFsX2JyZWFrZXJzOiA0LFxuICAgICAgICAgIG9wZW5fYnJlYWtlcnM6IDAsXG4gICAgICAgICAgaGFsZl9vcGVuX2JyZWFrZXJzOiAwLFxuICAgICAgICAgIGNsb3NlZF9icmVha2VyczogNCxcbiAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICBhdXRoOiB7IHN0YXRlOiAnY2xvc2VkJywgZmFpbHVyZUNvdW50OiAwIH0sXG4gICAgICAgICAgICBkYXRhYmFzZTogeyBzdGF0ZTogJ2Nsb3NlZCcsIGZhaWx1cmVDb3VudDogMCB9LFxuICAgICAgICAgICAgcGF5bWVudDogeyBzdGF0ZTogJ2Nsb3NlZCcsIGZhaWx1cmVDb3VudDogMCB9LFxuICAgICAgICAgICAgbWF0Y2hpbmc6IHsgc3RhdGU6ICdjbG9zZWQnLCBmYWlsdXJlQ291bnQ6IDAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVkaXM6IHtcbiAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgIHJlc3BvbnNlX3RpbWU6IDI1LFxuICAgICAgICAgIG1lbW9yeV91c2FnZTogMTAyNCxcbiAgICAgICAgICBjb25uZWN0ZWRfY2xpZW50czogMVxuICAgICAgICB9LFxuICAgICAgICBvdmVyYWxsX3N0YXR1czogJ2hlYWx0aHknLFxuICAgICAgICByZXNwb25zZV90aW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obW9ja0hlYWx0aCk7XG4gICAgfVxuXG4gICAgLy8gUmVhbCBzeXN0ZW0gaGVhbHRoIGNoZWNrIChpbXBvcnQgbW9kdWxlcyBkeW5hbWljYWxseSB0byBhdm9pZCBpc3N1ZXMpXG4gICAgY29uc3QgeyBkYiwgaW5pdGlhbGl6ZURhdGFiYXNlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL2RiJyk7XG4gICAgY29uc3QgeyBjaXJjdWl0QnJlYWtlck1hbmFnZXIgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvdXRpbHMvY2lyY3VpdEJyZWFrZXInKTtcblxuICAgIC8vIEVuc3VyZSBkYXRhYmFzZSBpcyBpbml0aWFsaXplZFxuICAgIGlmICghZGIuZ2V0U3RhdHMpIHtcbiAgICAgIGluaXRpYWxpemVEYXRhYmFzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWx0aCA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCcsXG4gICAgICBtb2RlOiAncmVhbCcsXG4gICAgICBkYXRhYmFzZTogYXdhaXQgZ2V0RGF0YWJhc2VIZWFsdGgoZGIpLFxuICAgICAgYXBpX21vZHVsZXM6IGF3YWl0IGdldEFwaU1vZHVsZXNIZWFsdGgoKSxcbiAgICAgIGNpcmN1aXRfYnJlYWtlcnM6IGdldENpcmN1aXRCcmVha2Vyc0hlYWx0aChjaXJjdWl0QnJlYWtlck1hbmFnZXIpLFxuICAgICAgcmVkaXM6IGF3YWl0IGdldFJlZGlzSGVhbHRoKCksXG4gICAgICBvdmVyYWxsX3N0YXR1czogJ2hlYWx0aHknXG4gICAgfTtcblxuICAgIC8vIENhbGN1bGF0ZSBvdmVyYWxsIHN0YXR1c1xuICAgIGhlYWx0aC5vdmVyYWxsX3N0YXR1cyA9IGNhbGN1bGF0ZU92ZXJhbGxTdGF0dXMoaGVhbHRoKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIC4uLmhlYWx0aCxcbiAgICAgIHJlc3BvbnNlX3RpbWU6IHJlc3BvbnNlVGltZVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICByZXNwb25zZV90aW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgbW9kZTogJ2Vycm9yJ1xuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YWJhc2VIZWFsdGgoZGI6IGFueSkge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIGRhdGFiYXNlIGlzIHByb3Blcmx5IGluaXRpYWxpemVkXG4gICAgaWYgKCFkYiB8fCAhZGIuZ2V0U3RhdHMgfHwgIWRiLmdldEhlYWx0aFN0YXR1cykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiAndW5oZWFsdGh5JyxcbiAgICAgICAgcmVzcG9uc2VfdGltZTogMCxcbiAgICAgICAgYWN0aXZlX2Nvbm5lY3Rpb25zOiAwLFxuICAgICAgICBxdWV1ZV9zaXplOiAwLFxuICAgICAgICBlcnJvcl9yYXRlOiAxLFxuICAgICAgICBsYXN0X2NoZWNrOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGVycm9yOiAnRGF0YWJhc2Ugbm90IHByb3Blcmx5IGluaXRpYWxpemVkJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBkYlN0YXRzID0gZGIuZ2V0U3RhdHMoKTtcbiAgICBjb25zdCBoZWFsdGhTdGF0dXMgPSBkYi5nZXRIZWFsdGhTdGF0dXMoKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBoZWFsdGhTdGF0dXMuc3RhdHVzLFxuICAgICAgcmVzcG9uc2VfdGltZTogaGVhbHRoU3RhdHVzLnJlc3BvbnNlVGltZSxcbiAgICAgIGFjdGl2ZV9jb25uZWN0aW9uczogaGVhbHRoU3RhdHVzLmFjdGl2ZUNvbm5lY3Rpb25zLFxuICAgICAgcXVldWVfc2l6ZTogaGVhbHRoU3RhdHVzLnF1ZXVlU2l6ZSxcbiAgICAgIGVycm9yX3JhdGU6IGhlYWx0aFN0YXR1cy5lcnJvckNvdW50IC8gTWF0aC5tYXgoaGVhbHRoU3RhdHVzLnN1Y2Nlc3NDb3VudCArIGhlYWx0aFN0YXR1cy5lcnJvckNvdW50LCAxKSxcbiAgICAgIGxhc3RfY2hlY2s6IGhlYWx0aFN0YXR1cy5sYXN0Q2hlY2sudG9JU09TdHJpbmcoKVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICByZXNwb25zZV90aW1lOiAwLFxuICAgICAgYWN0aXZlX2Nvbm5lY3Rpb25zOiAwLFxuICAgICAgcXVldWVfc2l6ZTogMCxcbiAgICAgIGVycm9yX3JhdGU6IDEsXG4gICAgICBsYXN0X2NoZWNrOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9O1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEFwaU1vZHVsZXNIZWFsdGgoKSB7XG4gIC8vIE1vY2sgZGF0YSBmb3Igbm93XG4gIHJldHVybiB7XG4gICAgYXV0aDoge1xuICAgICAgbGFzdF8yNGhfcmVxdWVzdHM6IDEyNTAsXG4gICAgICBsYXN0XzI0aF9lcnJvcnM6IDIsXG4gICAgICBzdWNjZXNzX3JhdGU6IDk5Ljg0LFxuICAgICAgYXZnX3Jlc3BvbnNlX3RpbWU6IDE0NSxcbiAgICAgIGxhc3RfZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyxcbiAgICAgIGxhc3RfZXJyb3JfdGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDM2MDAwMDApLnRvSVNPU3RyaW5nKClcbiAgICB9LFxuICAgIHBheToge1xuICAgICAgbGFzdF8yNGhfcmVxdWVzdHM6IDg5LFxuICAgICAgbGFzdF8yNGhfZXJyb3JzOiAwLFxuICAgICAgc3VjY2Vzc19yYXRlOiAxMDAuMCxcbiAgICAgIGF2Z19yZXNwb25zZV90aW1lOiAyMzQsXG4gICAgfSxcbiAgICBjaGF0OiB7XG4gICAgICBsYXN0XzI0aF9yZXF1ZXN0czogMzQyMCxcbiAgICAgIGxhc3RfMjRoX2Vycm9yczogMTIsXG4gICAgICBzdWNjZXNzX3JhdGU6IDk5LjY1LFxuICAgICAgYXZnX3Jlc3BvbnNlX3RpbWU6IDg5LFxuICAgICAgbGFzdF9lcnJvcjogJ01lc3NhZ2UgZGVsaXZlcnkgZmFpbGVkJyxcbiAgICAgIGxhc3RfZXJyb3JfdGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDE4MDAwMDApLnRvSVNPU3RyaW5nKClcbiAgICB9LFxuICAgIG1hdGNoOiB7XG4gICAgICBsYXN0XzI0aF9yZXF1ZXN0czogNTY3LFxuICAgICAgbGFzdF8yNGhfZXJyb3JzOiAzLFxuICAgICAgc3VjY2Vzc19yYXRlOiA5OS40NyxcbiAgICAgIGF2Z19yZXNwb25zZV90aW1lOiAzMTIsXG4gICAgICBsYXN0X2Vycm9yOiAnTWF0Y2hpbmcgYWxnb3JpdGhtIHRpbWVvdXQnLFxuICAgICAgbGFzdF9lcnJvcl90aW1lOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNzIwMDAwMCkudG9JU09TdHJpbmcoKVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2lyY3VpdEJyZWFrZXJzSGVhbHRoKGNpcmN1aXRCcmVha2VyTWFuYWdlcjogYW55KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RhdHVzID0gY2lyY3VpdEJyZWFrZXJNYW5hZ2VyLmdldFN0YXR1cygpO1xuICAgIGNvbnN0IGJyZWFrZXJzID0gT2JqZWN0LnZhbHVlcyhzdGF0dXMpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbF9icmVha2VyczogYnJlYWtlcnMubGVuZ3RoLFxuICAgICAgb3Blbl9icmVha2VyczogYnJlYWtlcnMuZmlsdGVyKChiOiBhbnkpID0+IGIuc3RhdGUgPT09ICdvcGVuJykubGVuZ3RoLFxuICAgICAgaGFsZl9vcGVuX2JyZWFrZXJzOiBicmVha2Vycy5maWx0ZXIoKGI6IGFueSkgPT4gYi5zdGF0ZSA9PT0gJ2hhbGYtb3BlbicpLmxlbmd0aCxcbiAgICAgIGNsb3NlZF9icmVha2VyczogYnJlYWtlcnMuZmlsdGVyKChiOiBhbnkpID0+IGIuc3RhdGUgPT09ICdjbG9zZWQnKS5sZW5ndGgsXG4gICAgICBkZXRhaWxzOiBzdGF0dXNcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICB0b3RhbF9icmVha2VyczogMCxcbiAgICAgIG9wZW5fYnJlYWtlcnM6IDAsXG4gICAgICBoYWxmX29wZW5fYnJlYWtlcnM6IDAsXG4gICAgICBjbG9zZWRfYnJlYWtlcnM6IDAsXG4gICAgICBkZXRhaWxzOiB7fVxuICAgIH07XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXNIZWFsdGgoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19VUkw/LnRyaW0oKTtcbiAgICBjb25zdCB0b2tlbiA9IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfVE9LRU4/LnRyaW0oKTtcbiAgICBcbiAgICBpZiAoIXVybCB8fCAhdG9rZW4pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHJlc3BvbnNlX3RpbWU6IDAsXG4gICAgICAgIG1lbW9yeV91c2FnZTogMCxcbiAgICAgICAgY29ubmVjdGVkX2NsaWVudHM6IDAsXG4gICAgICAgIGxhc3RfZXJyb3I6ICdNaXNzaW5nIFJlZGlzIGVudmlyb25tZW50IHZhcmlhYmxlcydcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgUmVkaXMgfSA9IHJlcXVpcmUoJ0B1cHN0YXNoL3JlZGlzJyk7XG4gICAgY29uc3QgcmVkaXMgPSBuZXcgUmVkaXMoeyB1cmwsIHRva2VuIH0pO1xuICAgIFxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgYXdhaXQgcmVkaXMuc2V0KCdoZWFsdGhfY2hlY2snLCAnb2snLCB7IGV4OiA2MCB9KTtcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgcmVzcG9uc2VfdGltZTogcmVzcG9uc2VUaW1lLFxuICAgICAgbWVtb3J5X3VzYWdlOiAxMDI0LFxuICAgICAgY29ubmVjdGVkX2NsaWVudHM6IDFcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICByZXNwb25zZV90aW1lOiAwLFxuICAgICAgbWVtb3J5X3VzYWdlOiAwLFxuICAgICAgY29ubmVjdGVkX2NsaWVudHM6IDAsXG4gICAgICBsYXN0X2Vycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlT3ZlcmFsbFN0YXR1cyhoZWFsdGg6IGFueSk6ICdoZWFsdGh5JyB8ICdkZWdyYWRlZCcgfCAndW5oZWFsdGh5JyB7XG4gIGNvbnN0IGlzc3VlcyA9IFtdO1xuICBcbiAgLy8gQ2hlY2sgZGF0YWJhc2Ugc3RhdHVzXG4gIGlmIChoZWFsdGguZGF0YWJhc2Uuc3RhdHVzID09PSAndW5oZWFsdGh5JykgaXNzdWVzLnB1c2goJ2RhdGFiYXNlX3VuaGVhbHRoeScpO1xuICBpZiAoaGVhbHRoLmRhdGFiYXNlLmVycm9yX3JhdGUgPiAwLjEpIGlzc3Vlcy5wdXNoKCdkYXRhYmFzZV9oaWdoX2Vycm9yX3JhdGUnKTtcbiAgXG4gIC8vIENoZWNrIEFQSSBtb2R1bGVzXG4gIE9iamVjdC5lbnRyaWVzKGhlYWx0aC5hcGlfbW9kdWxlcykuZm9yRWFjaCgoW21vZHVsZSwgbWV0cmljc106IFtzdHJpbmcsIGFueV0pID0+IHtcbiAgICBpZiAobWV0cmljcy5zdWNjZXNzX3JhdGUgPCA5NSkgaXNzdWVzLnB1c2goYCR7bW9kdWxlfV9sb3dfc3VjY2Vzc19yYXRlYCk7XG4gIH0pO1xuICBcbiAgLy8gQ2hlY2sgY2lyY3VpdCBicmVha2Vyc1xuICBpZiAoaGVhbHRoLmNpcmN1aXRfYnJlYWtlcnMub3Blbl9icmVha2VycyA+IDApIGlzc3Vlcy5wdXNoKCdjaXJjdWl0X2JyZWFrZXJzX29wZW4nKTtcbiAgXG4gIC8vIENoZWNrIFJlZGlzXG4gIGlmIChoZWFsdGgucmVkaXMuc3RhdHVzID09PSAnZXJyb3InKSBpc3N1ZXMucHVzaCgncmVkaXNfZXJyb3InKTtcbiAgXG4gIGlmIChpc3N1ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gJ2hlYWx0aHknO1xuICBpZiAoaXNzdWVzLmxlbmd0aCA8PSAyKSByZXR1cm4gJ2RlZ3JhZGVkJztcbiAgcmV0dXJuICd1bmhlYWx0aHknO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IGFjdGlvbiB9ID0gYm9keTtcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdyZXNldF9jaXJjdWl0X2JyZWFrZXJzJzpcbiAgICAgICAgLy8gVGhpcyBhY3Rpb24gaXMgbm90IGRpcmVjdGx5IGFwcGxpY2FibGUgaW4gbW9jayBtb2RlLFxuICAgICAgICAvLyBidXQgZm9yIGNvbnNpc3RlbmN5LCB3ZSBjYW4gcmV0dXJuIGEgc3VjY2VzcyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiBhIHJlYWwgc2NlbmFyaW8sIHlvdSdkIG5lZWQgdG8gaW1wb3J0IHRoZSBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJywgXG4gICAgICAgICAgbWVzc2FnZTogJ0NpcmN1aXQgYnJlYWtlcnMgcmVzZXQgKG1vY2sgbW9kZSknIFxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAnZm9yY2VfY2xvc2VfY2lyY3VpdF9icmVha2Vycyc6XG4gICAgICAgIC8vIFRoaXMgYWN0aW9uIGlzIG5vdCBkaXJlY3RseSBhcHBsaWNhYmxlIGluIG1vY2sgbW9kZSxcbiAgICAgICAgLy8gYnV0IGZvciBjb25zaXN0ZW5jeSwgd2UgY2FuIHJldHVybiBhIHN1Y2Nlc3MgbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gYSByZWFsIHNjZW5hcmlvLCB5b3UnZCBuZWVkIHRvIGltcG9ydCB0aGUgbWFuYWdlci5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsIFxuICAgICAgICAgIG1lc3NhZ2U6ICdDaXJjdWl0IGJyZWFrZXJzIGZvcmNlZCBjbG9zZWQgKG1vY2sgbW9kZSknIFxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAncmVzZXRfZGF0YWJhc2VfY29ubmVjdGlvbic6XG4gICAgICAgIC8vIFRoaXMgYWN0aW9uIGlzIG5vdCBkaXJlY3RseSBhcHBsaWNhYmxlIGluIG1vY2sgbW9kZSxcbiAgICAgICAgLy8gYnV0IGZvciBjb25zaXN0ZW5jeSwgd2UgY2FuIHJldHVybiBhIHN1Y2Nlc3MgbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gYSByZWFsIHNjZW5hcmlvLCB5b3UnZCBuZWVkIHRvIGltcG9ydCB0aGUgZGIgbW9kdWxlLlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJywgXG4gICAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gcmVzZXQgKG1vY2sgbW9kZSknIFxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAnY2xlYXJfcmVkaXNfY2FjaGUnOlxuICAgICAgICAvLyBUaGlzIGFjdGlvbiBpcyBub3QgZGlyZWN0bHkgYXBwbGljYWJsZSBpbiBtb2NrIG1vZGUsXG4gICAgICAgIC8vIGJ1dCBmb3IgY29uc2lzdGVuY3ksIHdlIGNhbiByZXR1cm4gYSBzdWNjZXNzIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIGEgcmVhbCBzY2VuYXJpbywgeW91J2QgbmVlZCB0byBpbXBvcnQgdGhlIFJlZGlzIGNsaWVudC5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsIFxuICAgICAgICAgIG1lc3NhZ2U6ICdSZWRpcyBjYWNoZSBjbGVhcmVkIChtb2NrIG1vZGUpJyBcbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGFjdGlvbidcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggUE9TVCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiR0VUIiwicmVxdWVzdCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJpc01vY2tNb2RlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIm1vY2tIZWFsdGgiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImVudmlyb25tZW50IiwibW9kZSIsImRhdGFiYXNlIiwic3RhdHVzIiwicmVzcG9uc2VfdGltZSIsImFjdGl2ZV9jb25uZWN0aW9ucyIsInF1ZXVlX3NpemUiLCJlcnJvcl9yYXRlIiwibGFzdF9jaGVjayIsImFwaV9tb2R1bGVzIiwiYXV0aCIsImxhc3RfMjRoX3JlcXVlc3RzIiwibGFzdF8yNGhfZXJyb3JzIiwic3VjY2Vzc19yYXRlIiwiYXZnX3Jlc3BvbnNlX3RpbWUiLCJsYXN0X2Vycm9yIiwibGFzdF9lcnJvcl90aW1lIiwicGF5IiwiY2hhdCIsIm1hdGNoIiwiY2lyY3VpdF9icmVha2VycyIsInRvdGFsX2JyZWFrZXJzIiwib3Blbl9icmVha2VycyIsImhhbGZfb3Blbl9icmVha2VycyIsImNsb3NlZF9icmVha2VycyIsImRldGFpbHMiLCJzdGF0ZSIsImZhaWx1cmVDb3VudCIsInBheW1lbnQiLCJtYXRjaGluZyIsInJlZGlzIiwibWVtb3J5X3VzYWdlIiwiY29ubmVjdGVkX2NsaWVudHMiLCJvdmVyYWxsX3N0YXR1cyIsImpzb24iLCJkYiIsImluaXRpYWxpemVEYXRhYmFzZSIsImNpcmN1aXRCcmVha2VyTWFuYWdlciIsImdldFN0YXRzIiwiaGVhbHRoIiwiZ2V0RGF0YWJhc2VIZWFsdGgiLCJnZXRBcGlNb2R1bGVzSGVhbHRoIiwiZ2V0Q2lyY3VpdEJyZWFrZXJzSGVhbHRoIiwiZ2V0UmVkaXNIZWFsdGgiLCJjYWxjdWxhdGVPdmVyYWxsU3RhdHVzIiwicmVzcG9uc2VUaW1lIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0SGVhbHRoU3RhdHVzIiwiZGJTdGF0cyIsImhlYWx0aFN0YXR1cyIsImFjdGl2ZUNvbm5lY3Rpb25zIiwicXVldWVTaXplIiwiZXJyb3JDb3VudCIsIk1hdGgiLCJtYXgiLCJzdWNjZXNzQ291bnQiLCJsYXN0Q2hlY2siLCJnZXRTdGF0dXMiLCJicmVha2VycyIsIk9iamVjdCIsInZhbHVlcyIsImxlbmd0aCIsImZpbHRlciIsImIiLCJ1cmwiLCJVUFNUQVNIX1JFRElTX1VSTCIsInRyaW0iLCJ0b2tlbiIsIlVQU1RBU0hfUkVESVNfVE9LRU4iLCJSZWRpcyIsInJlcXVpcmUiLCJzZXQiLCJleCIsImlzc3VlcyIsInB1c2giLCJlbnRyaWVzIiwiZm9yRWFjaCIsIm1vZHVsZSIsIm1ldHJpY3MiLCJQT1NUIiwiYm9keSIsImFjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/system/health/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsystem%2Fhealth%2Froute&page=%2Fapi%2Fsystem%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsystem%2Fhealth%2Froute.ts&appDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmac-guest1%2FDownloads%2FGit%2Fmvp_projects%2Fmvp_1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();