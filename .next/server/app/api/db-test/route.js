(()=>{var e={};e.id=8816,e.ids=[8816],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},92680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>_,patchFetch:()=>b,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>h});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>m});var o=r(10884),n=r(16132),a=r(21040),i=r(95798),c=r(69978);class u{static{this.errorLog=[]}static logError(e,t){this.errorLog.push({timestamp:new Date().toISOString(),error:e instanceof Error?e.message:String(e),context:t})}static getErrorLog(){return this.errorLog}static clearErrorLog(){this.errorLog=[]}static createErrorResponse(e,t){return this.logError(e,t),i.Z.json({status:"error",error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()},{status:500})}}async function l(e){let t=Date.now();try{let e=(0,c.e)(),r={timestamp:new Date().toISOString(),environment:"production",tests:{basicConnection:{},tableAccess:{},performance:{},concurrentConnections:{},rlsPolicies:{},environmentVariables:{},errorLog:[]}},s=Date.now();try{let{data:t,error:o}=await e.from("profiles").select("count").limit(1);r.tests.basicConnection={status:o?"failed":"success",responseTime:Date.now()-s,error:o?.message||null}}catch(e){r.tests.basicConnection={status:"failed",responseTime:Date.now()-s,error:e instanceof Error?e.message:"Unknown error"}}for(let t of(r.tests.tableAccess={},["profiles","matches","chats","messages","user_settings","user_activity"])){let s=Date.now();try{let{data:o,error:n}=await e.from(t).select("*").limit(1);r.tests.tableAccess[t]={status:n?"failed":"success",responseTime:Date.now()-s,error:n?.message||null}}catch(e){r.tests.tableAccess[t]={status:"failed",responseTime:Date.now()-s,error:e instanceof Error?e.message:"Unknown error"}}}for(let t of(r.tests.performance={},[{name:"simple_select",query:()=>e.from("profiles").select("id, full_name").limit(10)},{name:"complex_select",query:()=>e.from("profiles").select("*").limit(5)},{name:"count_query",query:()=>e.from("profiles").select("count")},{name:"filtered_query",query:()=>e.from("profiles").select("*").limit(5)}])){let e=Date.now();try{let{data:s,error:o}=await t.query();r.tests.performance[t.name]={status:o?"failed":"success",responseTime:Date.now()-e,resultCount:Array.isArray(s)?s.length:1,error:o?.message||null}}catch(s){r.tests.performance[t.name]={status:"failed",responseTime:Date.now()-e,error:s instanceof Error?s.message:"Unknown error"}}}let o=[,,,,,].fill(null).map(async(t,r)=>{let s=Date.now();try{let{data:t,error:o}=await e.from("profiles").select("count").limit(1);return{index:r,success:!o,responseTime:Date.now()-s,error:o?.message||null}}catch(e){return{index:r,success:!1,responseTime:Date.now()-s,error:e instanceof Error?e.message:"Unknown error"}}}),n=await Promise.all(o);r.tests.concurrentConnections={total:n.length,successful:n.filter(e=>e.success).length,failed:n.filter(e=>!e.success).length,averageResponseTime:n.reduce((e,t)=>e+t.responseTime,0)/n.length,details:n};let a=Date.now();try{let{data:t,error:s}=await e.from("profiles").select("*");r.tests.rlsPolicies={status:s&&s.message.includes("policy")?"working":"needs_configuration",responseTime:Date.now()-a,error:s?.message||null}}catch(e){r.tests.rlsPolicies={status:"working",responseTime:Date.now()-a,error:e instanceof Error?e.message:"Unknown error"}}for(let e of(r.tests.environmentVariables={},["NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","UPSTASH_REDIS_URL","UPSTASH_REDIS_TOKEN"])){let t=process.env[e];r.tests.environmentVariables[e]={configured:!!t,value:t?`${t.substring(0,10)}...`:null}}r.tests.errorLog=u.getErrorLog().slice(-10);let l=Date.now()-t,m=[r.tests.basicConnection,...Object.values(r.tests.tableAccess),...Object.values(r.tests.performance),r.tests.concurrentConnections,r.tests.rlsPolicies],d=m.filter(e=>"failed"===e.status).length,p=m.length;return r.summary={totalResponseTime:l,totalTests:p,failedTests:d,successRate:((p-d)/p*100).toFixed(2)+"%",overallStatus:0===d?"healthy":d<3?"degraded":"unhealthy"},i.Z.json(r)}catch(e){return u.createErrorResponse(e,"database test")}}async function m(e){try{let t=await e.json(),{action:r,data:s}=t;switch(r){case"clear_error_log":return u.clearErrorLog(),i.Z.json({status:"success",message:"Error log cleared"});case"test_write_operation":let o=(0,c.e)(),{data:n,error:a}=await o.from("user_settings").insert({user_id:"test-user-"+Date.now(),notifications_enabled:!0}).select().single();if(a)return i.Z.json({status:"failed",error:a.message},{status:400});return i.Z.json({status:"success",message:"Write operation successful",data:n});default:return i.Z.json({status:"error",message:"Invalid action"},{status:400})}}catch(e){return u.createErrorResponse(e,"database test POST")}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/db-test/route",pathname:"/api/db-test",filename:"route",bundlePath:"app/api/db-test/route"},resolvedPagePath:"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/api/db-test/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:g,headerHooks:y,staticGenerationBailout:h}=d,_="/api/db-test/route";function b(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},69978:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var s=r(74280),o=r(24596);let n=()=>{let e=(0,o.cookies)();return(0,s.createServerClient)("https://bamratexknmqvdbalzen.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXJhdGV4a25tcXZkYmFsemVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MTM4NzEsImV4cCI6MjA2ODA4OTg3MX0.yYa98ioJLLouUgHWITGb7U_VjNCTUuM-5NcraM7f3zA",{cookies:{get:t=>e.get(t)?.value,set(t,r,s){e.set({name:t,value:r,...s})},remove(t,r){e.set({name:t,value:"",...r})}}})}},79195:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DYNAMIC_ERROR_CODE:function(){return r},DynamicServerError:function(){return s}});let r="DYNAMIC_SERVER_USAGE";class s extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=r}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationBailout",{enumerable:!0,get:function(){return c}});let s=r(79195),o=r(22236),n=r(45869);class a extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function i(e,t){let{dynamic:r,link:s}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(s?" See more info here: "+s:"")}let c=(e,t)=>{let r=n.staticGenerationAsyncStorage.getStore();if(!r)return!1;if(r.forceStatic)return!0;if(r.dynamicShouldError){var c;throw new a(i(e,{...t,dynamic:null!=(c=null==t?void 0:t.dynamic)?c:"error"}))}let u=i(e,{...t,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if((0,o.maybePostpone)(r,e),r.revalidate=0,(null==t?void 0:t.dynamic)||(r.staticPrefetchBailout=!0),r.isStaticGeneration){let t=new s.DynamicServerError(u);throw r.dynamicUsageDescription=e,r.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[3271,1945,8107,782],()=>r(92680));module.exports=s})();