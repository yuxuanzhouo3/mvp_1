(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},40243:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>o,originalPathname:()=>m,pages:()=>x,routeModule:()=>h,tree:()=>d});var r=a(67096),t=a(16132),l=a(37284),i=a.n(l),c=a(32564),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);a.d(s,n);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1618)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,85573)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,62111)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,38196)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,44293)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/not-found.tsx"]}],x=["/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/page.tsx"],m="/dashboard/page",o={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},60516:(e,s,a)=>{Promise.resolve().then(a.bind(a,84495))},84495:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var r=a(53854),t=a(34218),l=a(86665),i=a(51018),c=a(63165),n=a(7857),d=a(26115),x=a(39195),m=a(31974),o=a(42833),h=a(49425),p=a(10518),u=a(41871),g=a(38954),j=a(85096),y=a(14024),v=a(67510),N=a(78466),b=a(71138),f=a(76699);let k=(0,o.createClient)("https://bamratexknmqvdbalzen.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXJhdGV4a25tcXZkYmFsemVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MTM4NzEsImV4cCI6MjA2ODA4OTg3MX0.yYa98ioJLLouUgHWITGb7U_VjNCTUuM-5NcraM7f3zA");function w(){let{user:e,signOut:s}=(0,l.a)(),a=(0,i.useRouter)(),{toast:o}=(0,m.p)(),[w,_]=(0,t.useState)(null),[Z,C]=(0,t.useState)([]),[q,M]=(0,t.useState)(null),[z,P]=(0,t.useState)(!0),[I,U]=(0,t.useState)(!1),D=async()=>{try{P(!0);let{data:{session:e}}=await k.auth.getSession();if(!e?.access_token)return;let s={Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},a=await fetch("/api/user/profile",{headers:s});if(a.ok){let e=await a.json();_(e.profile)}let r=await fetch("/api/user/matches?limit=5",{headers:s});if(r.ok){let e=await r.json();C(e.matches)}let t=await fetch("/api/user/stats",{headers:s});if(t.ok){let e=await t.json();M(e.stats)}}catch(e){o({title:"加载失败",description:"无法加载仪表盘数据",variant:"destructive"})}finally{P(!1)}};if((0,t.useEffect)(()=>{let s=setTimeout(()=>{if(U(!0),e)D();else{a.replace("/auth/login");return}},500);return()=>clearTimeout(s)},[e,a]),!I)return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-96 animate-pulse"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-24 animate-pulse"}),r.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-16 animate-pulse"}),r.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-20 animate-pulse"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1 space-y-6",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-32 animate-pulse"}),r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-24 animate-pulse"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 animate-pulse"})]})]})}),r.jsx("div",{className:"lg:col-span-2 space-y-6",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4 animate-pulse"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 animate-pulse"})]},e))})]})})]})]})});let G=async()=>{try{await s(),a.push("/"),o({title:"已退出登录",description:"期待您的再次光临！"})}catch(e){o({title:"退出失败",description:"请稍后重试",variant:"destructive"})}},Y=()=>{a.push("/matching")},O=()=>{a.push("/chat")};return z?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"加载中..."})]})}):w?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["欢迎回来，",w.full_name,"！"]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"发现新的朋友，开始有趣的对话"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(n.z,{variant:"outline",onClick:O,children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"查看聊天"]}),(0,r.jsxs)(n.z,{variant:"outline",onClick:()=>a.push("/settings"),children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"设置"]}),r.jsx(n.z,{variant:"outline",onClick:G,children:"退出登录"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:(0,r.jsxs)(c.ll,{className:"flex items-center",children:[r.jsx(u.Z,{className:"h-5 w-5 mr-2"}),"个人资料"]})}),(0,r.jsxs)(c.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(x.qE,{className:"h-16 w-16",children:[r.jsx(x.F$,{src:w.avatar_url}),r.jsx(x.Q5,{children:w.full_name?.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold",children:w.full_name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.email}),w.location&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[r.jsx(g.Z,{className:"h-3 w-3 mr-1"}),w.location]})]})]}),w.bio&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.bio}),w.interests.length>0&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"兴趣爱好"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[w.interests.slice(0,5).map((e,s)=>r.jsx(d.C,{variant:"secondary",className:"text-xs",children:e},s)),w.interests.length>5&&(0,r.jsxs)(d.C,{variant:"outline",className:"text-xs",children:["+",w.interests.length-5]})]})]}),r.jsx(n.z,{variant:"outline",className:"w-full",onClick:()=>a.push("/profile/edit"),children:"编辑资料"})]})]}),(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:(0,r.jsxs)(c.ll,{className:"flex items-center",children:[r.jsx(j.Z,{className:"h-5 w-5 mr-2"}),"积分余额"]})}),r.jsx(c.aY,{children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:w.credits}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"可用积分"}),(0,r.jsxs)(n.z,{onClick:()=>{a.push("/payment/recharge")},className:"w-full",children:[r.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"充值积分"]})]})})]}),(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:r.jsx(c.ll,{children:"快速操作"})}),(0,r.jsxs)(c.aY,{className:"space-y-3",children:[(0,r.jsxs)(n.z,{onClick:Y,className:"w-full",children:[r.jsx(v.Z,{className:"h-4 w-4 mr-2"}),"开始匹配"]}),(0,r.jsxs)(n.z,{variant:"outline",onClick:O,className:"w-full",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"查看聊天"]}),(0,r.jsxs)(n.z,{variant:"outline",onClick:()=>a.push("/matching/history"),className:"w-full",children:[r.jsx(N.Z,{className:"h-4 w-4 mr-2"}),"匹配历史"]})]})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[q&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(c.Zb,{children:r.jsx(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(v.Z,{className:"h-8 w-8 text-red-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"总匹配数"}),r.jsx("p",{className:"text-2xl font-bold",children:q.totalMatches})]})]})})}),r.jsx(c.Zb,{children:r.jsx(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.Z,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"消息数量"}),r.jsx("p",{className:"text-2xl font-bold",children:q.totalMessages})]})]})})}),r.jsx(c.Zb,{children:r.jsx(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(N.Z,{className:"h-8 w-8 text-green-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"活跃聊天"}),r.jsx("p",{className:"text-2xl font-bold",children:q.activeChats})]})]})})}),r.jsx(c.Zb,{children:r.jsx(c.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(b.Z,{className:"h-8 w-8 text-purple-500 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"资料完整度"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[q.profileCompletion,"%"]})]})]})})})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(v.Z,{className:"h-5 w-5 mr-2"}),"最近匹配"]}),r.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>a.push("/matching/history"),children:"查看全部"})]}),r.jsx(c.SZ,{children:"您最近的匹配对象"})]}),r.jsx(c.aY,{children:0===Z.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(v.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"还没有匹配记录"}),r.jsx(n.z,{onClick:Y,children:"开始匹配"})]}):r.jsx("div",{className:"space-y-4",children:Z.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>a.push(`/chat/${e.id}`),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(x.qE,{children:[r.jsx(x.F$,{src:e.matched_user.avatar_url}),r.jsx(x.Q5,{children:e.matched_user.full_name?.charAt(0).toUpperCase()})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.matched_user.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["匹配于 ",new Date(e.matched_at).toLocaleDateString()]})]})]}),r.jsx("div",{className:"text-right",children:(0,r.jsxs)(d.C,{variant:"secondary",children:[Math.round(100*e.compatibility_score),"% 匹配"]})})]},e.id))})})]}),(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:(0,r.jsxs)(c.ll,{className:"flex items-center",children:[r.jsx(f.Z,{className:"h-5 w-5 mr-2"}),"活动摘要"]})}),r.jsx(c.aY,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"本周新匹配"}),r.jsx("span",{className:"font-medium",children:Z.filter(e=>new Date(e.matched_at)>new Date(Date.now()-6048e5)).length})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"活跃天数"}),r.jsx("span",{className:"font-medium",children:Math.floor((Date.now()-new Date(w.created_at).getTime())/864e5)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"平均响应时间"}),r.jsx("span",{className:"font-medium",children:"2.3 小时"})]})]})})]})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(c.Ol,{children:[r.jsx(c.ll,{children:"用户资料未找到"}),r.jsx(c.SZ,{children:"请完善您的个人资料"})]}),r.jsx(c.aY,{children:r.jsx(n.z,{onClick:()=>a.push("/profile/setup"),className:"w-full",children:"设置个人资料"})})]})})}},76699:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},38954:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},14024:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},71138:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},41871:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},78466:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1618:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=a(95153);let t=(0,r.createProxy)(String.raw`/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/page.tsx`),{__esModule:l,$$typeof:i}=t,c=t.default,n=c}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[3271,7085,6163,782,9584,7149,1233],()=>a(40243));module.exports=r})();