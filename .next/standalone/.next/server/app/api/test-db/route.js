(()=>{var e={};e.id=8735,e.ids=[8735],e.modules={30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},82081:(e,r,s)=>{"use strict";s.r(r),s.d(r,{headerHooks:()=>h,originalPathname:()=>I,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>b});var t={};s.r(t),s.d(t,{GET:()=>l,POST:()=>m});var a=s(10884),o=s(16132),i=s(21040),n=s(95798),u=s(16163);let c=(0,u.eI)("https://bamratexknmqvdbalzen.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhbXJhdGV4a25tcXZkYmFsemVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MTM4NzEsImV4cCI6MjA2ODA4OTg3MX0.yYa98ioJLLouUgHWITGb7U_VjNCTUuM-5NcraM7f3zA");async function l(e){try{let{data:e,error:r}=await c.from("profiles").select("count").limit(1);if(r)return n.Z.json({status:"error",message:"Database connection failed",error:r.message},{status:500});let s=[];for(let e of["profiles","user_settings","match_preferences","matches","chat_rooms","messages","payments","user_balance","transactions","user_interests","user_photos"])try{let{data:r,error:t}=await c.from(e).select("*").limit(1);s.push({table:e,status:t?"error":"ok",error:t?.message||null})}catch(r){s.push({table:e,status:"error",error:r instanceof Error?r.message:"Unknown error"})}let t=Date.now(),{data:a,error:o}=await c.from("profiles").select("id, username, age, location").limit(10),i=Date.now()-t,{data:u,error:l}=await c.from("profiles").select("*"),m=l&&l.message.includes("policy");return n.Z.json({status:"success",tests:{connection:{status:"ok",message:"Database connection successful"},tables:s,performance:{queryTime:`${i}ms`,profilesFound:a?.length||0},rls:{working:m,message:m?"RLS is properly configured":"RLS might need configuration"}}})}catch(e){return n.Z.json({status:"error",message:"Internal server error",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function m(e){try{let r=await e.json(),{action:s,data:t}=r;switch(s){case"create_profile":let{data:a,error:o}=await c.from("profiles").insert({id:t.id,username:t.username,email:t.email,bio:t.bio,age:t.age,gender:t.gender,location:t.location}).select().single();if(o)return n.Z.json({status:"error",message:"Failed to create profile",error:o.message},{status:400});return n.Z.json({status:"success",message:"Profile created successfully",data:a});case"create_match":let{data:i,error:u}=await c.from("matches").insert({user1_id:t.user1_id,user2_id:t.user2_id,status:t.status||"pending"}).select().single();if(u)return n.Z.json({status:"error",message:"Failed to create match",error:u.message},{status:400});return n.Z.json({status:"success",message:"Match created successfully",data:i});default:return n.Z.json({status:"error",message:"Invalid action"},{status:400})}}catch(e){return n.Z.json({status:"error",message:"Internal server error",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/test-db/route",pathname:"/api/test-db",filename:"route",bundlePath:"app/api/test-db/route"},resolvedPagePath:"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/api/test-db/route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:f,headerHooks:h,staticGenerationBailout:b}=p,I="/api/test-db/route";function w(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[3271,1945,8107],()=>s(82081));module.exports=t})();