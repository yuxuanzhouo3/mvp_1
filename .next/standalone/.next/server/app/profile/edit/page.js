(()=>{var e={};e.id=3159,e.ids=[3159],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},59437:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var t=r(67096),i=r(16132),a=r(37284),l=r.n(a),o=r(32564),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(s,n);let c=["",{children:["profile",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,84702)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/profile/edit/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3102)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,38196)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,44293)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/not-found.tsx"]}],d=["/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/profile/edit/page.tsx"],u="/profile/edit/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/profile/edit/page",pathname:"/profile/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},93507:(e,s,r)=>{Promise.resolve().then(r.bind(r,6838))},6838:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>w});var t=r(53854),i=r(34218),a=r(51018),l=r(92747),o=r(44468),n=r(50136),c=r(7857),d=r(24769),u=r(63165),p=r(30991),x=r(86665),m=r(31974),f=r(2882),h=r(41871),g=r(76699),v=r(38954),b=r(13092),y=r(75548),j=r.n(y);let N=n.Ry({username:n.Z_().min(3,"用户名至少3个字符"),bio:n.Z_().max(500,"个人简介不能超过500字符"),age:n.Rx().min(18,"年龄必须至少18岁").max(100,"年龄不能超过100岁"),location:n.Z_().min(2,"请输入有效的位置")});function w(){let[e,s]=(0,i.useState)(!1),[r,n]=(0,i.useState)(null),y=(0,a.useRouter)(),{user:w}=(0,x.a)(),{toast:_}=(0,m.p)(),k=(0,l.cI)({resolver:(0,o.F)(N)});(0,i.useEffect)(()=>{if(!w){y.push("/auth/login");return}q()},[w,y]);let q=async()=>{try{let e=await fetch("/api/user/profile");if(e.ok){let s=await e.json();n(s.profile),k.reset({username:s.profile.username||"",bio:s.profile.bio||"",age:s.profile.age||18,location:s.profile.location||""})}}catch(e){_({title:"加载失败",description:"无法加载个人资料",variant:"destructive"})}},Z=async e=>{s(!0);try{let s=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)_({title:"更新成功",description:"您的个人资料已成功更新"}),y.push("/dashboard");else throw Error("更新失败")}catch(e){_({title:"更新失败",description:"请稍后重试",variant:"destructive"})}finally{s(!1)}};return w&&r?t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"编辑个人资料"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"更新您的个人信息和偏好设置"})]}),t.jsx(j(),{href:"/dashboard",children:(0,t.jsxs)(c.z,{variant:"outline",children:[t.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"返回仪表盘"]})})]}),(0,t.jsxs)(u.Zb,{children:[(0,t.jsxs)(u.Ol,{children:[t.jsx(u.ll,{children:"基本信息"}),t.jsx(u.SZ,{children:"更新您的基本个人信息"})]}),t.jsx(u.aY,{children:(0,t.jsxs)("form",{onSubmit:k.handleSubmit(Z),className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium",children:"用户名"}),t.jsx(d.I,{...k.register("username"),placeholder:"输入用户名",icon:t.jsx(h.Z,{className:"h-4 w-4"})}),k.formState.errors.username&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:k.formState.errors.username.message})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium",children:"个人简介"}),t.jsx(p.g,{...k.register("bio"),placeholder:"简单介绍一下自己...",rows:4}),k.formState.errors.bio&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:k.formState.errors.bio.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium",children:"年龄"}),t.jsx(d.I,{...k.register("age",{valueAsNumber:!0}),type:"number",placeholder:"年龄",icon:t.jsx(g.Z,{className:"h-4 w-4"})}),k.formState.errors.age&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:k.formState.errors.age.message})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium",children:"位置"}),t.jsx(d.I,{...k.register("location"),placeholder:"城市，国家",icon:t.jsx(v.Z,{className:"h-4 w-4"})}),k.formState.errors.location&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:k.formState.errors.location.message})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[t.jsx(j(),{href:"/dashboard",children:t.jsx(c.z,{type:"button",variant:"outline",children:"取消"})}),(0,t.jsxs)(c.z,{type:"submit",disabled:e,children:[t.jsx(b.Z,{className:"h-4 w-4 mr-2"}),e?"保存中...":"保存更改"]})]})]})})]})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"加载个人资料中..."})]})})}},24769:(e,s,r)=>{"use strict";r.d(s,{I:()=>l});var t=r(53854),i=r(34218),a=r(56370);let l=i.forwardRef(({className:e,type:s,label:r,error:i,icon:l,description:o,...n},c)=>(0,t.jsxs)("div",{className:"w-full space-y-1",children:[r&&t.jsx("label",{className:"block text-sm font-medium text-foreground",children:r}),(0,t.jsxs)("div",{className:"relative",children:[l&&t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l}),t.jsx("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",l?"pl-10":"",i?"border-destructive focus-visible:ring-destructive/30":"",e),ref:c,...n})]}),o&&!i&&t.jsx("p",{className:"text-xs text-muted-foreground",children:o}),i&&t.jsx("p",{className:"text-xs text-destructive",children:i})]}));l.displayName="Input"},30991:(e,s,r)=>{"use strict";r.d(s,{g:()=>l});var t=r(53854),i=r(34218),a=r(56370);let l=i.forwardRef(({className:e,...s},r)=>t.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));l.displayName="Textarea"},31974:(e,s,r)=>{"use strict";r.d(s,{p:()=>i});var t=r(70664);let i=t.pm},2882:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},76699:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},38954:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13092:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},41871:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},84702:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});var t=r(95153);let i=(0,t.createProxy)(String.raw`/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/profile/edit/page.tsx`),{__esModule:a,$$typeof:l}=i,o=i.default,n=o}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3271,5359,8427,7583],()=>r(59437));module.exports=t})();