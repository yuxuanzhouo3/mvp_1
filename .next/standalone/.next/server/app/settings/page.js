(()=>{var e={};e.id=6938,e.ids=[6938],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},93993:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>d});var r=t(67096),i=t(16132),a=t(37284),l=t.n(a),n=t(32564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,14011)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3102)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/not-found.tsx"]}],o=["/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/settings/page.tsx"],u="/settings/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98882:(e,s,t)=>{Promise.resolve().then(t.bind(t,98092))},98092:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var r=t(53854),i=t(34218),a=t(51018),l=t(86665),n=t(63165),c=t(7857),d=t(24769),o=t(32629),u=t(31974),x=t(41871),p=t(89471),m=t(34212),h=t(85096),f=t(80962);function v(){let e=(0,a.useRouter)(),{user:s,signOut:t}=(0,l.a)(),{toast:v}=(0,u.p)(),[g,j]=(0,i.useState)({notifications:!0,emailUpdates:!0,darkMode:!1,language:"zh-CN"}),[b,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!s){e.push("/auth/login");return}},[s,e]);let N=(e,s)=>{j(t=>({...t,[e]:s}))},k=async()=>{y(!0);try{let e=await fetch("/api/user/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});e.ok&&v({title:"设置已保存",description:"您的设置已成功更新"})}catch(e){v({title:"保存失败",description:"无法保存设置，请稍后重试",variant:"destructive"})}finally{y(!1)}},w=async()=>{await t(),e.push("/")};return s?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"设置"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"管理您的账户设置和偏好"})]}),(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[r.jsx(x.Z,{className:"h-5 w-5 mr-2"}),"个人资料"]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"显示名称"}),r.jsx(d.I,{defaultValue:s.user_metadata?.full_name||"",placeholder:"输入显示名称"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"邮箱"}),r.jsx(d.I,{defaultValue:s.email||"",disabled:!0,className:"bg-gray-50"})]})]}),r.jsx(c.z,{onClick:()=>e.push("/profile/edit"),children:"编辑完整资料"})]})]}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-5 w-5 mr-2"}),"通知设置"]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:"推送通知"}),r.jsx("p",{className:"text-sm text-gray-600",children:"接收新消息和匹配通知"})]}),r.jsx(o.r,{checked:g.notifications,onCheckedChange:e=>N("notifications",e)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:"邮件更新"}),r.jsx("p",{className:"text-sm text-gray-600",children:"接收重要更新和活动通知"})]}),r.jsx(o.r,{checked:g.emailUpdates,onCheckedChange:e=>N("emailUpdates",e)})]})]})]}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[r.jsx(m.Z,{className:"h-5 w-5 mr-2"}),"隐私设置"]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:"在线状态"}),r.jsx("p",{className:"text-sm text-gray-600",children:"允许其他用户看到您的在线状态"})]}),r.jsx(o.r,{defaultChecked:!0})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:"位置信息"}),r.jsx("p",{className:"text-sm text-gray-600",children:"在匹配中显示您的位置"})]}),r.jsx(o.r,{defaultChecked:!0})]})]})]}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[r.jsx(h.Z,{className:"h-5 w-5 mr-2"}),"支付设置"]})}),r.jsx(n.aY,{children:r.jsx(c.z,{variant:"outline",onClick:()=>e.push("/payment/recharge"),children:"管理支付方式"})})]}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center",children:[r.jsx(f.Z,{className:"h-5 w-5 mr-2"}),"语言设置"]})}),r.jsx(n.aY,{children:(0,r.jsxs)("select",{value:g.language,onChange:e=>N("language",e.target.value),className:"w-full p-2 border rounded-md",children:[r.jsx("option",{value:"zh-CN",children:"中文 (简体)"}),r.jsx("option",{value:"en-US",children:"English (US)"}),r.jsx("option",{value:"ja-JP",children:"日本語"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx(c.z,{variant:"outline",onClick:()=>e.push("/dashboard"),children:"返回仪表盘"}),(0,r.jsxs)("div",{className:"space-x-2",children:[r.jsx(c.z,{variant:"outline",onClick:k,disabled:b,children:b?"保存中...":"保存设置"}),r.jsx(c.z,{variant:"destructive",onClick:w,children:"退出登录"})]})]})]})]})}):null}},24769:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var r=t(53854),i=t(34218),a=t(56370);let l=i.forwardRef(({className:e,type:s,label:t,error:i,icon:l,description:n,...c},d)=>(0,r.jsxs)("div",{className:"w-full space-y-1",children:[t&&r.jsx("label",{className:"block text-sm font-medium text-foreground",children:t}),(0,r.jsxs)("div",{className:"relative",children:[l&&r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l}),r.jsx("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",l?"pl-10":"",i?"border-destructive focus-visible:ring-destructive/30":"",e),ref:d,...c})]}),n&&!i&&r.jsx("p",{className:"text-xs text-muted-foreground",children:n}),i&&r.jsx("p",{className:"text-xs text-destructive",children:i})]}));l.displayName="Input"},32629:(e,s,t)=>{"use strict";t.d(s,{r:()=>k});var r=t(53854),i=t(34218),a=t(64667),l=t(81951),n=t(65864),c=t(76026),d=t(50024),o=t(5440),u=t(59280),x="Switch",[p,m]=(0,n.b)(x),[h,f]=p(x),v=i.forwardRef((e,s)=>{let{__scopeSwitch:t,name:n,checked:d,defaultChecked:o,required:p,disabled:m,value:f="on",onCheckedChange:v,form:g,...j}=e,[N,k]=i.useState(null),w=(0,l.e)(s,e=>k(e)),_=i.useRef(!1),q=!N||g||!!N.closest("form"),[C,P]=(0,c.T)({prop:d,defaultProp:o??!1,onChange:v,caller:x});return(0,r.jsxs)(h,{scope:t,checked:C,disabled:m,children:[(0,r.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":C,"aria-required":p,"data-state":y(C),"data-disabled":m?"":void 0,disabled:m,value:f,...j,ref:w,onClick:(0,a.M)(e.onClick,e=>{P(e=>!e),q&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})}),q&&(0,r.jsx)(b,{control:N,bubbles:!_.current,name:n,value:f,checked:C,required:p,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});v.displayName=x;var g="SwitchThumb",j=i.forwardRef((e,s)=>{let{__scopeSwitch:t,...i}=e,a=f(g,t);return(0,r.jsx)(u.WV.span,{"data-state":y(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:s})});j.displayName=g;var b=i.forwardRef(({__scopeSwitch:e,control:s,checked:t,bubbles:a=!0,...n},c)=>{let u=i.useRef(null),x=(0,l.e)(u,c),p=(0,d.D)(t),m=(0,o.t)(s);return i.useEffect(()=>{let e=u.current;if(!e)return;let s=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(s,"checked"),i=r.set;if(p!==t&&i){let s=new Event("click",{bubbles:a});i.call(e,t),e.dispatchEvent(s)}},[p,t,a]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:x,style:{...n.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function y(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var N=t(56370);let k=i.forwardRef(({className:e,...s},t)=>r.jsx(v,{className:(0,N.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:r.jsx(j,{className:(0,N.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform","data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));k.displayName=v.displayName},31974:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var r=t(70664);let i=r.pm},89471:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},85096:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},34212:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},41871:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},14011:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>c});var r=t(95153);let i=(0,r.createProxy)(String.raw`/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/settings/page.tsx`),{__esModule:a,$$typeof:l}=i,n=i.default,c=n},50024:(e,s,t)=>{"use strict";t.d(s,{D:()=>i});var r=t(34218);function i(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}},5440:(e,s,t)=>{"use strict";t.d(s,{t:()=>a});var r=t(34218),i=t(76223);function a(e){let[s,t]=r.useState(void 0);return(0,i.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let r,i;if(!Array.isArray(s)||!s.length)return;let a=s[0];if("borderBoxSize"in a){let e=a.borderBoxSize,s=Array.isArray(e)?e[0]:e;r=s.inlineSize,i=s.blockSize}else r=e.offsetWidth,i=e.offsetHeight;t({width:r,height:i})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}t(void 0)},[e]),s}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[3271,5359,7583],()=>t(93993));module.exports=r})();