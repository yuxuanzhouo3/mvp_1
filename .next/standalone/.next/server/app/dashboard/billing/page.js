(()=>{var e={};e.id=5600,e.ids=[5600],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},96911:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var r=t(67096),a=t(16132),i=t(37284),n=t.n(i),l=t(32564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,37117)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/billing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,15581)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3102)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/not-found.tsx"]}],o=["/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/billing/page.tsx"],x="/dashboard/billing/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/billing/page",pathname:"/dashboard/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},82239:(e,s,t)=>{Promise.resolve().then(t.bind(t,43511))},43511:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var r=t(53854),a=t(34218),i=t(51018),n=t(86665),l=t(63165),c=t(7857),d=t(26115),o=t(31974),x=t(2882),m=t(87787),u=t(14024),p=t(85096),h=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,h.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var j=t(75548),v=t.n(j);function y(){let e=(0,i.useRouter)(),{user:s}=(0,n.a)(),{toast:t}=(0,o.p)(),[h,j]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),[f,N]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(!s){e.push("/auth/login");return}_()},[s]);let _=async()=>{try{b(!0);let e=await fetch("/api/user/billing");if(e.ok){let s=await e.json();j(s.records),N(s.balance||0)}}catch(e){t({title:"加载失败",description:"无法加载账单信息",variant:"destructive"})}finally{b(!1)}},w=()=>{e.push("/payment/recharge")},k=async e=>{try{return}catch(e){t({title:"下载失败",description:"无法下载发票",variant:"destructive"})}},q=e=>{switch(e){case"completed":return r.jsx(d.C,{variant:"default",className:"bg-green-100 text-green-800",children:"已完成"});case"pending":return r.jsx(d.C,{variant:"secondary",children:"处理中"});case"failed":return r.jsx(d.C,{variant:"destructive",children:"失败"});default:return r.jsx(d.C,{variant:"outline",children:"未知"})}},P=e=>{let s=new Date(e);return s.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return y?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"加载账单信息中..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"账单管理"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"查看您的充值记录和账单信息"})]}),r.jsx(v(),{href:"/dashboard",children:(0,r.jsxs)(c.z,{variant:"outline",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"返回仪表盘"]})})]}),(0,r.jsxs)(l.Zb,{className:"mb-8",children:[r.jsx(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center",children:[r.jsx(m.Z,{className:"h-5 w-5 mr-2"}),"当前余额"]})}),r.jsx(l.aY,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["\xa5",f.toFixed(2)]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"可用于匹配和聊天"})]}),(0,r.jsxs)(c.z,{onClick:w,children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"充值"]})]})})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-5 w-5 mr-2"}),"充值记录"]})}),r.jsx(l.aY,{children:0===h.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(p.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"暂无充值记录"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"开始您的第一次充值吧！"}),r.jsx(c.z,{onClick:w,children:"立即充值"})]}):r.jsx("div",{className:"space-y-4",children:h.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(p.Z,{className:"h-8 w-8 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.description}),q(e.status)]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{children:["支付方式: ",e.payment_method]}),(0,r.jsxs)("span",{children:["时间: ",P(e.created_at)]})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\xa5",e.amount.toFixed(2)]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.currency})]}),"completed"===e.status&&e.invoice_url&&(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>k(e.id),children:[r.jsx(g,{className:"h-4 w-4 mr-2"}),"发票"]})]})]},e.id))})})]})]})})}},87787:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},14024:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(23708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},37117:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>c});var r=t(95153);let a=(0,r.createProxy)(String.raw`/Users/mac-guest1/Downloads/Git/mvp_projects/mvp_1/app/dashboard/billing/page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,c=l}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[3271,5359,7583,9864],()=>t(96911));module.exports=r})();